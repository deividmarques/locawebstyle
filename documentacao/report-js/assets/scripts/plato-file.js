$(function(){"use strict";function t(){$(".plato-mark").removeClass("focus");var e=window.location.hash.substr(1);return e&&$("."+e).addClass("focus"),t}function e(t){t.forEach(function(t){Morris.Donut(t).on("click",f)})}function i(t){$(".historical.chart").empty();var e=_.map(t,function(t){var e=new Date(t.date);return{date:e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),maintainability:parseFloat(t.maintainability).toFixed(2),sloc:t.sloc}}).slice(-20);Morris.Line({element:"chart_historical_sloc",data:e,xkey:"date",ykeys:["sloc"],labels:["Lines of Code"],parseTime:!1}),Morris.Line({element:"chart_historical_maint",data:e,xkey:"date",ykeys:["maintainability"],labels:["Maintainability"],ymax:100,parseTime:!1})}function n(t){var e={};t.jshint.messages.forEach(function(t){var i="Column: "+t.column+' "'+t.message+'"';_.isArray(t.line)?t.line.forEach(function(n){e[n]||(e[n]=""),e[n]+='<div class="plato-jshint-message text-'+t.severity+'">'+i+"</div>"}):(e[t.line]||(e[t.line]=""),e[t.line]+='<div class="plato-jshint-message text-'+t.severity+'">'+i+"</div>")});var i=document.createElement("a");i.innerHTML='<i class="plato-gutter-icon icon-eye-open"></i>',Object.keys(e).forEach(function(t){var n=document.createElement("div");n.innerHTML=e[t],a.setGutterMarker(t-1,"plato-gutter-jshint",i.cloneNode(!0)),a.addLineWidget(t-1,n)})}$("[rel=popover]").popover(),_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},window.onhashchange=t();var r=document.getElementById("file-source"),o={lineNumbers:!0,gutters:["plato-gutter-jshint","plato-gutter-complexity"],readOnly:"nocursor"},a=CodeMirror.fromTextArea(r,o),s=[],l=[],c=_.template($("#complexity-popover-template").text()),d=$('<a><i class="plato-gutter-icon icon-cog"></i></a>'),u=a.operation(function(){var t=[];return __report.complexity.functions.forEach(function(e,i){s.push({label:e.name,value:e.complexity.cyclomatic}),l.push({label:e.name,value:e.complexity.sloc.physical,formatter:function(t){return t+" lines"}});var n="<anonymous>"===e.name?"function\\s*\\([^)]*\\)":e.name,r=e.line-1,o="plato-mark-fn-"+i,u={gutterId:"plato-gutter-complexity",el:d.clone().attr("name",o)[0]},f={type:"popover",title:"<anonymous>"===e.name?"&lt;anonymous&gt;":"function "+e.name,content:c(e)};t.push(a.markPopoverText({line:r,ch:0},n,o,u,f))}),t});u.forEach(function(t){t()});var f=function(t){var e=[window.pageXOffset,window.pageYOffset];window.location.hash="#plato-mark-fn-"+t,window.scrollTo(e[0],e[1]);var i=__report.complexity.functions[t].line,n=a.charCoords({line:i,ch:0});$("body,html").animate({scrollTop:n.top-50},250)};setTimeout(function(){e([{element:"fn-by-complexity",data:s},{element:"fn-by-sloc",data:l}]),i(__history)},0),a.operation(function(){n(__report)})});