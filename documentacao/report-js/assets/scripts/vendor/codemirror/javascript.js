CodeMirror.defineMode("javascript",function(t,e){function i(t,e,i){return e.tokenize=i,i(t,e)}function n(t,e){for(var i,n=!1;null!=(i=t.next());){if(i==e&&!n)return!1;n=!n&&"\\"==i}return n}function a(t,e,i){return I=t,W=i,e}function o(t,e){var o=t.next();if('"'==o||"'"==o)return i(t,e,s(o));if(/[\[\]{}\(\),;\:\.]/.test(o))return a(o);if("0"==o&&t.eat(/x/i))return t.eatWhile(/[\da-f]/i),a("number","number");if(/\d/.test(o)||"-"==o&&t.eat(/\d/))return t.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),a("number","number");if("/"==o)return t.eat("*")?i(t,e,r):t.eat("/")?(t.skipToEnd(),a("comment","comment")):"operator"==e.lastType||"keyword c"==e.lastType||/^[\[{}\(,;:]$/.test(e.lastType)?(n(t,"/"),t.eatWhile(/[gimy]/),a("regexp","string-2")):(t.eatWhile(Y),a("operator",null,t.current()));if("#"==o)return t.skipToEnd(),a("error","error");if(Y.test(o))return t.eatWhile(Y),a("operator",null,t.current());t.eatWhile(/[\w\$_]/);var l=t.current(),c=R.propertyIsEnumerable(l)&&R[l];return c&&"."!=e.lastType?a(c.type,c.style,l):a("variable","variable",l)}function s(t){return function(e,i){return n(e,t)||(i.tokenize=o),a("string","string")}}function r(t,e){for(var i,n=!1;i=t.next();){if("/"==i&&n){e.tokenize=o;break}n="*"==i}return a("comment","comment")}function l(t,e,i,n,a,o){this.indented=t,this.column=e,this.type=i,this.prev=a,this.info=o,null!=n&&(this.align=n)}function c(t,e){for(var i=t.localVars;i;i=i.next)if(i.name==e)return!0}function d(t,e,i,n,a){var o=t.cc;for(G.state=t,G.stream=a,G.marked=null,G.cc=o,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);;){var s=o.length?o.pop():z?b:v;if(s(i,n)){for(;o.length&&o[o.length-1].lex;)o.pop()();return G.marked?G.marked:"variable"==i&&c(t,n)?"variable-2":e}}}function u(){for(var t=arguments.length-1;t>=0;t--)G.cc.push(arguments[t])}function f(){return u.apply(null,arguments),!0}function p(t){var e=G.state;if(e.context){G.marked="def";for(var i=e.localVars;i;i=i.next)if(i.name==t)return;e.localVars={name:t,next:e.localVars}}}function h(){G.state.context={prev:G.state.context,vars:G.state.localVars},G.state.localVars=q}function m(){G.state.localVars=G.state.context.vars,G.state.context=G.state.context.prev}function _(t,e){var i=function(){var i=G.state;i.lexical=new l(i.indented,G.stream.column(),t,null,i.lexical,e)};return i.lex=!0,i}function y(){var t=G.state;t.lexical.prev&&(")"==t.lexical.type&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}function g(t){return function(e){return e==t?f():";"==t?u():f(arguments.callee)}}function v(t){return"var"==t?f(_("vardef"),E,g(";"),y):"keyword a"==t?f(_("form"),b,v,y):"keyword b"==t?f(_("form"),v,y):"{"==t?f(_("}"),M,y):";"==t?f():"function"==t?f(N):"for"==t?f(_("form"),g("("),_(")"),j,g(")"),y,v,y):"variable"==t?f(_("stat"),k):"switch"==t?f(_("form"),b,_("}","switch"),g("{"),M,y,y):"case"==t?f(b,g(":")):"default"==t?f(g(":")):"catch"==t?f(_("form"),h,g("("),P,g(")"),v,y,m):u(_("stat"),b,g(";"),y)}function b(t){return V.hasOwnProperty(t)?f(w):"function"==t?f(N):"keyword c"==t?f(x):"("==t?f(_(")"),x,g(")"),y,w):"operator"==t?f(b):"["==t?f(_("]"),S(b,"]"),y,w):"{"==t?f(_("}"),S(D,"}"),y,w):f()}function x(t){return t.match(/[;\}\)\],]/)?u():u(b)}function w(t,e){if("operator"==t&&/\+\+|--/.test(e))return f(w);if("operator"==t&&"?"==e)return f(b,g(":"),b);if(";"!=t)return"("==t?f(_(")"),S(b,")"),y,w):"."==t?f(C,w):"["==t?f(_("]"),b,g("]"),y,w):void 0}function k(t){return":"==t?f(y,v):u(w,g(";"),y)}function C(t){return"variable"==t?(G.marked="property",f()):void 0}function D(t){return"variable"==t&&(G.marked="property"),V.hasOwnProperty(t)?f(g(":"),b):void 0}function S(t,e){function i(n){return","==n?f(t,i):n==e?f():f(g(e))}return function(n){return n==e?f():u(t,i)}}function M(t){return"}"==t?f():u(v,M)}function T(t){return":"==t?f(L):u()}function L(t){return"variable"==t?(G.marked="variable-3",f()):u()}function E(t,e){return"variable"==t?(p(e),H?f(T,A):f(A)):u()}function A(t,e){return"="==e?f(b,A):","==t?f(E):void 0}function j(t){return"var"==t?f(E,g(";"),O):f(";"==t?O:"variable"==t?$:O)}function $(t,e){return"in"==e?f(b):f(w,O)}function O(t,e){return";"==t?f(B):"in"==e?f(b):f(b,g(";"),B)}function B(t){")"!=t&&f(b)}function N(t,e){return"variable"==t?(p(e),f(N)):"("==t?f(_(")"),h,S(P,")"),y,v,m):void 0}function P(t,e){return"variable"==t?(p(e),H?f(T):f()):void 0}var I,W,F=t.indentUnit,z=e.json,H=e.typescript,R=function(){function t(t){return{type:t,style:"keyword"}}var e=t("keyword a"),i=t("keyword b"),n=t("keyword c"),a=t("operator"),o={type:"atom",style:"atom"},s={"if":e,"while":e,"with":e,"else":i,"do":i,"try":i,"finally":i,"return":n,"break":n,"continue":n,"new":n,"delete":n,"throw":n,"var":t("var"),"const":t("var"),let:t("var"),"function":t("function"),"catch":t("catch"),"for":t("for"),"switch":t("switch"),"case":t("case"),"default":t("default"),"in":a,"typeof":a,"instanceof":a,"true":o,"false":o,"null":o,undefined:o,NaN:o,Infinity:o};if(H){var r={type:"variable",style:"variable-3"},l={"interface":t("interface"),"class":t("class"),"extends":t("extends"),constructor:t("constructor"),"public":t("public"),"private":t("private"),"protected":t("protected"),"static":t("static"),"super":t("super"),string:r,number:r,bool:r,any:r};for(var c in l)s[c]=l[c]}return s}(),Y=/[+\-*&%=<>!?|]/,V={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},G={state:null,column:null,marked:null,cc:null},q={name:"this",next:{name:"arguments"}};return y.lex=!0,{startState:function(t){return{tokenize:o,lastType:null,cc:[],lexical:new l((t||0)-F,0,"block",!1),localVars:e.localVars,context:e.localVars&&{vars:e.localVars},indented:0}},token:function(t,e){if(t.sol()&&(e.lexical.hasOwnProperty("align")||(e.lexical.align=!1),e.indented=t.indentation()),t.eatSpace())return null;var i=e.tokenize(t,e);return"comment"==I?i:(e.lastType=I,d(e,i,I,W,t))},indent:function(t,e){if(t.tokenize==r)return CodeMirror.Pass;if(t.tokenize!=o)return 0;var i=e&&e.charAt(0),n=t.lexical;"stat"==n.type&&"}"==i&&(n=n.prev);var a=n.type,s=i==a;return"vardef"==a?n.indented+("operator"==t.lastType||","==t.lastType?4:0):"form"==a&&"{"==i?n.indented:"form"==a?n.indented+F:"stat"==a?n.indented+("operator"==t.lastType||","==t.lastType?F:0):"switch"!=n.info||s?n.align?n.column+(s?0:1):n.indented+(s?0:F):n.indented+(/^(?:case|default)\b/.test(e)?F:2*F)},electricChars:":{}",jsonMode:z}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0});