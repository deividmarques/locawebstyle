function splitLines(t){return t.split(/\r?\n|\r/)}function StringStream(t){this.pos=this.start=0,this.string=t}StringStream.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||null},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var i=e==t;else var i=e&&(t.test?t.test(e):t(e));return i?(++this.pos,e):void 0},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);return e>-1?(this.pos=e,!0):void 0},backUp:function(t){this.pos-=t},column:function(){return this.start},indentation:function(){return 0},match:function(t,e,i){function a(t){return i?t.toLowerCase():t}if("string"!=typeof t){var s=this.string.slice(this.pos).match(t);return s&&e!==!1&&(this.pos+=s[0].length),s}return a(this.string).indexOf(a(t),this.pos)==this.pos?(e!==!1&&(this.pos+=t.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},exports.StringStream=StringStream,exports.startState=function(t,e,i){return t.startState?t.startState(e,i):!0};var modes=exports.modes={},mimeModes=exports.mimeModes={};exports.defineMode=function(t,e){modes[t]=e},exports.defineMIME=function(t,e){mimeModes[t]=e},exports.getMode=function(t,e){if("string"==typeof e&&mimeModes.hasOwnProperty(e)&&(e=mimeModes[e]),"string"==typeof e)var i=e,a={};else if(null!=e)var i=e.name,a=e;var s=modes[i];if(!s)throw new Error("Unknown mode: "+e);return s(t,a||{})},exports.runMode=function(t,e,i){for(var a=exports.getMode({indentUnit:2},e),s=splitLines(t),o=exports.startState(a),n=0,r=s.length;r>n;++n){n&&i("\n");for(var l=new exports.StringStream(s[n]);!l.eol();){var c=a.token(l,o);i(l.current(),c,n,l.start),l.start=l.pos}}};