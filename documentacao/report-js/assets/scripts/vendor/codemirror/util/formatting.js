!function(){CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(t,e){return/^[;{}]$/.test(e)}}),CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(t,e,i,n){return this.jsonMode?/^[\[,{]$/.test(e)||/^}/.test(i):";"==e&&n.lexical&&")"==n.lexical.type?!1:/^[;{}]$/.test(e)&&!/^;/.test(i)}}),CodeMirror.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(t,e,i){return"tag"==t&&/>$/.test(e)||/^</.test(i)}}),CodeMirror.defineExtension("commentRange",function(t,e,i){var n=this,a=CodeMirror.innerMode(n.getMode(),n.getTokenAt(e).state).mode;n.operation(function(){if(t)n.replaceRange(a.commentEnd,i),n.replaceRange(a.commentStart,e),e.line==i.line&&e.ch==i.ch&&n.setCursor(e.line,e.ch+a.commentStart.length);else{var o=n.getRange(e,i),r=o.indexOf(a.commentStart),s=o.lastIndexOf(a.commentEnd);r>-1&&s>-1&&s>r&&(o=o.substr(0,r)+o.substring(r+a.commentStart.length,s)+o.substr(s+a.commentEnd.length)),n.replaceRange(o,e,i)}})}),CodeMirror.defineExtension("autoIndentRange",function(t,e){var i=this;this.operation(function(){for(var n=t.line;n<=e.line;n++)i.indentLine(n,"smart")})}),CodeMirror.defineExtension("autoFormatRange",function(t,e){function i(){l+="\n",d=!0,++c}for(var n=this,a=n.getMode(),o=n.getRange(t,e).split("\n"),r=CodeMirror.copyState(a,n.getTokenAt(t).state),s=n.getOption("tabSize"),l="",c=0,d=0==t.ch,u=0;u<o.length;++u){for(var f=new CodeMirror.StringStream(o[u],s);!f.eol();){var p=CodeMirror.innerMode(a,r),h=a.token(f,r),m=f.current();f.start=f.pos,(!d||/\S/.test(m))&&(l+=m,d=!1),!d&&p.mode.newlineAfterToken&&p.mode.newlineAfterToken(h,m,f.string.slice(f.pos)||o[u+1]||"",p.state)&&i()}!f.pos&&a.blankLine&&a.blankLine(r),d||i()}n.operation(function(){n.replaceRange(l,t,e);for(var i=t.line+1,a=t.line+c;a>=i;++i)n.indentLine(i,"smart");n.setSelection(t,n.getCursor(!1))})})}();