window.CodeMirror=function(){"use strict";function t(n,o){if(!(this instanceof t))return new t(n,o);this.options=o=o||{};for(var r in Qa)!o.hasOwnProperty(r)&&Qa.hasOwnProperty(r)&&(o[r]=Qa[r]);u(o);var c=this.display=e(n);c.wrapper.CodeMirror=this,l(this),o.autofocus&&!Ya&&Q(this),this.view=i(new Li([new Mi([yi("",null,Y(c))])])),this.nextOpId=0,a(this),s(this),o.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),this.setValue(o.value||""),$a&&setTimeout(na(K,this,!0),20),this.view.history=ji(),ee(this);var d;try{d=document.activeElement==c.input}catch(f){}d||o.autofocus&&!Ya?setTimeout(na(ye,this),20):ge(this),q(this,function(){for(var t in Ka)Ka.propertyIsEnumerable(t)&&Ka[t](this,o[t],tn);for(var e=0;e<on.length;++e)on[e](this)})()}function e(t){var e={},i=e.input=ra("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none;");i.setAttribute("wrap","off"),i.setAttribute("autocorrect","off"),i.setAttribute("autocapitalize","off"),e.inputDiv=ra("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),e.scrollbarH=ra("div",[ra("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),e.scrollbarV=ra("div",[ra("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),e.scrollbarFiller=ra("div",null,"CodeMirror-scrollbar-filler"),e.lineDiv=ra("div"),e.selectionDiv=ra("div",null,null,"position: relative; z-index: 1"),e.cursor=ra("pre","\xa0","CodeMirror-cursor"),e.otherCursor=ra("pre","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"),e.measure=ra("div",null,"CodeMirror-measure"),e.lineSpace=ra("div",[e.measure,e.selectionDiv,e.lineDiv,e.cursor,e.otherCursor],null,"position: relative; outline: none"),e.mover=ra("div",[ra("div",[e.lineSpace],"CodeMirror-lines")],null,"position: relative"),e.sizer=ra("div",[e.mover],"CodeMirror-sizer"),e.heightForcer=ra("div","\xa0",null,"position: absolute; height: "+dn+"px"),e.gutters=ra("div",null,"CodeMirror-gutters"),e.lineGutter=null;var a=ra("div",[e.sizer,e.heightForcer,e.gutters],null,"position: relative; min-height: 100%");return e.scroller=ra("div",[a],"CodeMirror-scroll"),e.scroller.setAttribute("tabIndex","-1"),e.wrapper=ra("div",[e.inputDiv,e.scrollbarH,e.scrollbarV,e.scrollbarFiller,e.scroller],"CodeMirror"),Ea&&(e.gutters.style.zIndex=-1,e.scroller.style.paddingRight=0),t.appendChild?t.appendChild(e.wrapper):t(e.wrapper),Ha&&(i.style.width="0px"),Oa||(e.scroller.draggable=!0),Wa?(e.inputDiv.style.height="1px",e.inputDiv.style.position="absolute"):Ea&&(e.scrollbarH.style.minWidth=e.scrollbarV.style.minWidth="18px"),e.viewOffset=e.showingFrom=e.showingTo=e.lastSizeC=0,e.lineNumWidth=e.lineNumInnerWidth=e.lineNumChars=null,e.prevInput="",e.alignWidgets=!1,e.pollingFast=!1,e.poll=new Ji,e.draggingText=!1,e.cachedCharWidth=e.cachedTextHeight=null,e.measureLineCache=[],e.measureLineCachePos=0,e.inaccurateSelection=!1,e.pasteIncoming=!1,e}function i(t){var e={line:0,ch:0};return{doc:t,frontier:0,highlight:new Ji,sel:{from:e,to:e,head:e,anchor:e,shift:!1,extend:!1},scrollTop:0,scrollLeft:0,overwrite:!1,focused:!1,maxLine:$i(t,0),maxLineLength:0,maxLineChanged:!1,suppressEdits:!1,goalColumn:null,cantEdit:!1,keyMaps:[]}}function a(e){var i=e.view.doc;e.view.mode=t.getMode(e.options,e.options.mode),i.iter(0,i.size,function(t){t.stateAfter=null}),e.view.frontier=0,M(e,100)}function n(t){var e=t.view.doc,i=Y(t.display);if(t.options.lineWrapping){t.display.wrapper.className+=" CodeMirror-wrap";var a=t.display.scroller.clientWidth/R(t.display)-3;e.iter(0,e.size,function(t){if(0!=t.height){var e=Math.ceil(t.text.length/a)||1;1!=e&&Ei(t,e*i)}}),t.display.sizer.style.minWidth=""}else t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-wrap",""),d(t.view),e.iter(0,e.size,function(t){0!=t.height&&Ei(t,i)});U(t,0,e.size),P(t),setTimeout(function(){f(t.display,t.view.doc.height)},100)}function o(t){var e=rn[t.options.keyMap].style;t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(e?" cm-keymap-"+e:"")}function s(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),P(t)}function r(t){l(t),g(t,!0)}function l(t){var e=t.display.gutters,i=t.options.gutters;la(e);for(var a=0;a<i.length;++a){var n=i[a],o=e.appendChild(ra("div",null,"CodeMirror-gutter "+n));"CodeMirror-linenumbers"==n&&(t.display.lineGutter=o,o.style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=a?"":"none"}function c(t,e){if(0==e.height)return 0;for(var i,a=e.text.length,n=e;i=ri(n);){var o=i.find();n=$i(t,o.from.line),a+=o.from.ch-o.to.ch}for(n=e;i=li(n);){var o=i.find();a-=n.text.length-o.from.ch,n=$i(t,o.to.line),a+=n.text.length-o.to.ch}return a}function d(t){t.maxLine=$i(t.doc,0),t.maxLineLength=c(t.doc,t.maxLine),t.maxLineChanged=!0,t.doc.iter(1,t.doc.size,function(e){var i=c(t.doc,e);i>t.maxLineLength&&(t.maxLineLength=i,t.maxLine=e)})}function u(t){for(var e=!1,i=0;i<t.gutters.length;++i)"CodeMirror-linenumbers"==t.gutters[i]&&(t.lineNumbers?e=!0:t.gutters.splice(i--,1));!e&&t.lineNumbers&&t.gutters.push("CodeMirror-linenumbers")}function f(t,e){var i=e+2*A(t);t.sizer.style.minHeight=t.heightForcer.style.top=i+"px";var a=Math.max(i,t.scroller.scrollHeight),n=t.scroller.scrollWidth>t.scroller.clientWidth,o=a>t.scroller.clientHeight;o?(t.scrollbarV.style.display="block",t.scrollbarV.style.bottom=n?ua(t.measure)+"px":"0",t.scrollbarV.firstChild.style.height=a-t.scroller.clientHeight+t.scrollbarV.clientHeight+"px"):t.scrollbarV.style.display="",n?(t.scrollbarH.style.display="block",t.scrollbarH.style.right=o?ua(t.measure)+"px":"0",t.scrollbarH.firstChild.style.width=t.scroller.scrollWidth-t.scroller.clientWidth+t.scrollbarH.clientWidth+"px"):t.scrollbarH.style.display="",n&&o?(t.scrollbarFiller.style.display="block",t.scrollbarFiller.style.height=t.scrollbarFiller.style.width=ua(t.measure)+"px"):t.scrollbarFiller.style.display="",Ia&&0===ua(t.measure)&&(t.scrollbarV.style.minWidth=t.scrollbarH.style.minHeight=za?"18px":"12px")}function p(t,e,i){var a=t.scroller.scrollTop,n=t.wrapper.clientHeight;"number"==typeof i?a=i:i&&(a=i.top,n=i.bottom-i.top),a=Math.floor(a-A(t));var o=Math.ceil(a+n);return{from:Oi(e,a),to:Oi(e,o)}}function h(t){var e=t.display;if(e.alignWidgets||e.gutters.firstChild){for(var i=y(e)-e.scroller.scrollLeft+t.view.scrollLeft,a=e.gutters.offsetWidth,n=i+"px",o=e.lineDiv.firstChild;o;o=o.nextSibling)if(o.alignable)for(var s=0,r=o.alignable;s<r.length;++s)r[s].style.left=n;e.gutters.style.left=i+a+"px"}}function m(t){if(!t.options.lineNumbers)return!1;var e=t.view.doc,i=_(t.options,e.size-1),a=t.display;if(i.length!=a.lineNumChars){var n=a.measure.appendChild(ra("div",[ra("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=n.firstChild.offsetWidth,s=n.offsetWidth-o;return a.lineGutter.style.width="",a.lineNumInnerWidth=Math.max(o,a.lineGutter.offsetWidth-s),a.lineNumWidth=a.lineNumInnerWidth+s,a.lineNumChars=a.lineNumInnerWidth?i.length:-1,a.lineGutter.style.width=a.lineNumWidth+"px",!0}return!1}function _(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function y(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function g(t,e,i){var a=t.display.showingFrom,n=t.display.showingTo,o=v(t,e,i);return o&&(Zi(t,t,"update",t),(t.display.showingFrom!=a||t.display.showingTo!=n)&&Zi(t,t,"viewportChange",t,t.display.showingFrom,t.display.showingTo)),C(t),f(t.display,t.view.doc.height),o}function v(t,e,i){var a=t.display,n=t.view.doc;if(!a.wrapper.clientWidth)return void(a.showingFrom=a.showingTo=a.viewOffset=0);var o=p(a,n,i);if(!(e!==!0&&0==e.length&&o.from>a.showingFrom&&o.to<a.showingTo)){if(e&&m(t)&&(e=!0),a.sizer.style.marginLeft=a.scrollbarH.style.left=a.gutters.offsetWidth+"px",e!==!0&&Va)for(var s=0;s<e.length;++s)for(var r,l=e[s];r=ri($i(n,l.from));){var c=r.find().from.line;l.diff&&(l.diff-=l.from-c),l.from=c}var d=e===!0?0:1/0;if(t.options.lineNumbers&&e&&e!==!0)for(var s=0;s<e.length;++s)if(e[s].diff){d=e[s].from;break}var c=Math.max(o.from-t.options.viewportMargin,0),u=Math.min(n.size,o.to+t.options.viewportMargin);if(a.showingFrom<c&&c-a.showingFrom<20&&(c=a.showingFrom),a.showingTo>u&&a.showingTo-u<20&&(u=Math.min(n.size,a.showingTo)),Va)for(c=Ai(ci(n,$i(n,c)));u<n.size&&di($i(n,u));)++u;for(var f=e===!0?[]:b([{from:a.showingFrom,to:a.showingTo}],e),h=0,s=0;s<f.length;++s){var _=f[s];_.from<c&&(_.from=c),_.to>u&&(_.to=u),_.from>=_.to?f.splice(s--,1):h+=_.to-_.from}if(h!=u-c||c!=a.showingFrom||u!=a.showingTo){f.sort(function(t,e){return t.from-e.from}),.7*(u-c)>h&&(a.lineDiv.style.display="none"),w(t,c,u,f,d),a.lineDiv.style.display="";var y=c!=a.showingFrom||u!=a.showingTo||a.lastSizeC!=a.wrapper.clientHeight;y&&(a.lastSizeC=a.wrapper.clientHeight),a.showingFrom=c,a.showingTo=u,M(t,100);for(var g,v=a.lineDiv.offsetTop,x=a.lineDiv.firstChild;x;x=x.nextSibling)if(x.lineObj){if(Ea){var k=x.offsetTop+x.offsetHeight;g=k-v,v=k}else{var C=x.getBoundingClientRect();g=C.bottom-C.top}var D=x.lineObj.height-g;2>g&&(g=Y(a)),(D>.001||-.001>D)&&Ei(x.lineObj,g)}return a.viewOffset=Bi(t,$i(n,c)),a.mover.style.top=a.viewOffset+"px",!0}}}function b(t,e){for(var i=0,a=e.length||0;a>i;++i){for(var n=e[i],o=[],s=n.diff||0,r=0,l=t.length;l>r;++r){var c=t[r];n.to<=c.from&&n.diff?o.push({from:c.from+s,to:c.to+s}):n.to<=c.from||n.from>=c.to?o.push(c):(n.from>c.from&&o.push({from:c.from,to:n.from}),n.to<c.to&&o.push({from:n.to+s,to:c.to+s}))}t=o}return t}function x(t){for(var e=t.display,i={},a={},n=e.gutters.firstChild,o=0;n;n=n.nextSibling,++o)i[t.options.gutters[o]]=n.offsetLeft,a[t.options.gutters[o]]=n.offsetWidth;return{fixedPos:y(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:i,gutterWidth:a,wrapperWidth:e.wrapper.clientWidth}}function w(t,e,i,a,n){function o(e){var i=e.nextSibling;return Oa&&Ra&&t.display.currentWheelTarget==e?(e.style.display="none",e.lineObj=null):c.removeChild(e),i}var s=x(t),r=t.display,l=t.options.lineNumbers;a.length||$a||Oa&&t.display.currentWheelTarget||la(r.lineDiv);var c=r.lineDiv,d=c.firstChild,u=a.shift(),f=e;for(t.view.doc.iter(e,i,function(e){if(u&&u.to==f&&(u=a.shift()),di(e))0!=e.height&&Ei(e,0);else if(u&&u.from<=f&&u.to>f){for(;d.lineObj!=e;)d=o(d);l&&f>=n&&d.lineNumber&&da(d.lineNumber,_(t.options,f)),d=d.nextSibling}else{var i=k(t,e,f,s);c.insertBefore(i,d),i.lineObj=e}++f});d;)d=o(d)}function k(t,e,i,a){var n=ki(t,e),o=e.gutterMarkers,s=t.display;if(!(t.options.lineNumbers||o||e.bgClass||e.wrapClass||e.widgets&&e.widgets.length))return n;var r=ra("div",null,e.wrapClass,"position: relative");if(t.options.lineNumbers||o){var l=r.appendChild(ra("div",null,null,"position: absolute; left: "+a.fixedPos+"px"));if(r.alignable=[l],!t.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(r.lineNumber=l.appendChild(ra("div",_(t.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+a.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+s.lineNumInnerWidth+"px"))),o)for(var c=0;c<t.options.gutters.length;++c){var d=t.options.gutters[c],u=o.hasOwnProperty(d)&&o[d];u&&l.appendChild(ra("div",[u],"CodeMirror-gutter-elt","left: "+a.gutterLeft[d]+"px; width: "+a.gutterWidth[d]+"px"))}}if(e.bgClass&&r.appendChild(ra("div","\xa0",e.bgClass+" CodeMirror-linebackground")),r.appendChild(n),e.widgets)for(var f=0,p=e.widgets;f<p.length;++f){var h=p[f],m=ra("div",[h.node],"CodeMirror-linewidget");if(m.widget=h,h.noHScroll){(r.alignable||(r.alignable=[])).push(m);var y=a.wrapperWidth;m.style.left=a.fixedPos+"px",h.coverGutter||(y-=a.gutterTotalWidth,m.style.paddingLeft=a.gutterTotalWidth+"px"),m.style.width=y+"px"}h.coverGutter&&(m.style.zIndex=5,m.style.position="relative",h.noHScroll||(m.style.marginLeft=-a.gutterTotalWidth+"px")),h.above?r.insertBefore(m,t.options.lineNumbers&&0!=e.height?l:n):r.appendChild(m)}return Ea&&(r.style.zIndex=2),r}function C(t){var e=t.display,i=De(t.view.sel.from,t.view.sel.to);i||t.options.showCursorWhenSelecting?D(t):e.cursor.style.display=e.otherCursor.style.display="none",i?e.selectionDiv.style.display="none":S(t);var a=z(t,t.view.sel.head,"div"),n=e.wrapper.getBoundingClientRect(),o=e.lineDiv.getBoundingClientRect();e.inputDiv.style.top=Math.max(0,Math.min(e.wrapper.clientHeight-10,a.top+o.top-n.top))+"px",e.inputDiv.style.left=Math.max(0,Math.min(e.wrapper.clientWidth-10,a.left+o.left-n.left))+"px"}function D(t){var e=t.display,i=z(t,t.view.sel.head,"div");e.cursor.style.left=i.left+"px",e.cursor.style.top=i.top+"px",e.cursor.style.height=Math.max(0,i.bottom-i.top)*t.options.cursorHeight+"px",e.cursor.style.display="",i.other?(e.otherCursor.style.display="",e.otherCursor.style.left=i.other.left+"px",e.otherCursor.style.top=i.other.top+"px",e.otherCursor.style.height=.85*(i.other.bottom-i.other.top)+"px"):e.otherCursor.style.display="none"}function S(t){function e(t,e,i,a){0>e&&(e=0),s.appendChild(ra("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+e+"px; width: "+(null==i?r-t:i)+"px; height: "+(a-e)+"px"))}function i(i,a,o,s){function c(e){return I(t,{line:i,ch:e},"div",d)}var d=$i(n,i),u=d.text.length,f=s?1/0:-1/0;return pa(Ni(d),a||0,null==o?u:o,function(t,i,n){var d=c("rtl"==n?i-1:t),p=c("rtl"==n?t:i-1),h=d.left,m=p.right;p.top-d.top>3&&(e(h,d.top,null,d.bottom),h=l,d.bottom<p.top&&e(h,d.bottom,null,p.top)),null==o&&i==u&&(m=r),null==a&&0==t&&(h=l),f=s?Math.min(p.top,f):Math.max(p.bottom,f),l+1>h&&(h=l),e(h,p.top,m-h,p.bottom)}),f}var a=t.display,n=t.view.doc,o=t.view.sel,s=document.createDocumentFragment(),r=a.lineSpace.offsetWidth,l=O(t.display);if(o.from.line==o.to.line)i(o.from.line,o.from.ch,o.to.ch);else{for(var c,d,u=$i(n,o.from.line),f=u,p=[o.from.line,o.from.ch];c=li(f);){var h=c.find();if(p.push(h.from.ch,h.to.line,h.to.ch),h.to.line==o.to.line){p.push(o.to.ch),d=!0;break}f=$i(n,h.to.line)}if(d)for(var m=0;m<p.length;m+=3)i(p[m],p[m+1],p[m+2]);else{var _,y,g=$i(n,o.to.line);_=o.from.ch?i(o.from.line,o.from.ch,null,!1):Bi(t,u)-a.viewOffset,y=o.to.ch?i(o.to.line,ri(g)?null:0,o.to.ch,!0):Bi(t,g)-a.viewOffset,y>_&&e(l,_,null,y)}}ca(a.selectionDiv,s),a.selectionDiv.style.display=""}function T(t){var e=t.display;clearInterval(e.blinker);var i=!0;e.cursor.style.visibility=e.otherCursor.style.visibility="",e.blinker=setInterval(function(){e.cursor.offsetHeight&&(e.cursor.style.visibility=e.otherCursor.style.visibility=(i=!i)?"":"hidden")},t.options.cursorBlinkRate)}function M(t,e){t.view.frontier<t.display.showingTo&&t.view.highlight.set(e,na(L,t))}function L(t){var e=t.view,i=e.doc;if(!(e.frontier>=t.display.showingTo)){var a,n=+new Date+t.options.workTime,o=Ge(e.mode,E(t,e.frontier)),s=[];i.iter(e.frontier,Math.min(i.size,t.display.showingTo+500),function(i){return e.frontier>=t.display.showingFrom?(bi(t,i,o)&&e.frontier>=t.display.showingFrom&&(a&&a.end==e.frontier?a.end++:s.push(a={start:e.frontier,end:e.frontier+1})),i.stateAfter=Ge(e.mode,o)):(xi(t,i,o),i.stateAfter=e.frontier%5==0?Ge(e.mode,o):null),++e.frontier,+new Date>n?(M(t,t.options.workDelay),!0):void 0}),s.length&&q(t,function(){for(var t=0;t<s.length;++t)U(this,s[t].start,s[t].end)})()}}function $(t,e){for(var i,a,n=t.view.doc,o=e,s=e-100;o>s;--o){if(0==o)return 0;var r=$i(n,o-1);if(r.stateAfter)return o;var l=Ki(r.text,null,t.options.tabSize);(null==a||i>l)&&(a=o-1,i=l)}return a}function E(t,e){var i=t.view,a=$(t,e),n=a&&$i(i.doc,a-1).stateAfter;return n=n?Ge(i.mode,n):Ve(i.mode),i.doc.iter(a,e,function(o){xi(t,o,n);var s=a==e-1||a%5==0||a>=i.showingFrom&&a<i.showingTo;o.stateAfter=s?Ge(i.mode,n):null,++a}),n}function A(t){return t.lineSpace.offsetTop}function O(t){var e=ca(t.measure,ra("pre")).appendChild(ra("span","x"));return e.offsetLeft}function B(t,e,i,a){for(var a=a||N(t,e),n=-1,o=i;;o+=n){var s=a[o];if(s)break;0>n&&0==o&&(n=1)}return{left:i>o?s.right:s.left,right:o>i?s.left:s.right,top:s.top,bottom:s.bottom}}function N(t,e){for(var i=t.display,a=t.display.measureLineCache,n=0;n<a.length;++n){var o=a[n];if(o.text==e.text&&o.markedSpans==e.markedSpans&&i.scroller.clientWidth==o.width)return o.measure}var s=j(t,e),o={text:e.text,width:i.scroller.clientWidth,markedSpans:e.markedSpans,measure:s};return 16==a.length?a[++i.measureLineCachePos%16]=o:a.push(o),s}function j(t,e){var i=t.display,a=aa(e.text.length),n=ki(t,e,a);if($a&&!Ea&&!t.options.lineWrapping&&n.childNodes.length>100){for(var o=document.createDocumentFragment(),s=10,r=n.childNodes.length,l=0,c=Math.ceil(r/s);c>l;++l){for(var d=ra("div",null,null,"display: inline-block"),u=0;s>u&&r;++u)d.appendChild(n.firstChild),--r;o.appendChild(d)}n.appendChild(o)}ca(i.measure,n);for(var f,p=i.lineDiv.getBoundingClientRect(),h=[],m=aa(e.text.length),_=n.offsetHeight,l=0;l<a.length;++l)if(f=a[l]){for(var y=f.getBoundingClientRect(),g=Math.max(0,y.top-p.top),v=Math.min(y.bottom-p.top,_),u=0;u<h.length;u+=2){var b=h[u],x=h[u+1];if(!(b>v||g>x)&&(g>=b&&x>=v||b>=g&&v>=x||Math.min(v,x)-Math.max(g,b)>=v-g>>1)){h[u]=Math.min(g,b),h[u+1]=Math.max(v,x);break}}u==h.length&&h.push(g,v),m[l]={left:y.left-p.left,right:y.right-p.left,top:u}}for(var f,l=0;l<m.length;++l)if(f=m[l]){var w=f.top;f.top=h[w],f.bottom=h[w+1]}return m}function P(t){t.display.measureLineCache.length=t.display.measureLineCachePos=0,t.display.cachedCharWidth=t.display.cachedTextHeight=null,t.view.maxLineChanged=!0}function W(t,e,i,a){if(e.widgets)for(var n=0;n<e.widgets.length;++n)if(e.widgets[n].above){var o=e.widgets[n].node.offsetHeight;i.top+=o,i.bottom+=o}if("line"==a)return i;a||(a="local");var s=Bi(t,e);if("local"!=a&&(s-=t.display.viewOffset),"page"==a){var r=t.display.lineSpace.getBoundingClientRect();s+=r.top+(window.pageYOffset||(document.documentElement||document.body).scrollTop);var l=r.left+(window.pageXOffset||(document.documentElement||document.body).scrollLeft);i.left+=l,i.right+=l}return i.top+=s,i.bottom+=s,i}function I(t,e,i,a){return a||(a=$i(t.view.doc,e.line)),W(t,a,B(t,a,e.ch),i)}function z(t,e,i,a,n){function o(e,o){var s=B(t,a,e,n);return o?s.left=s.right:s.right=s.left,W(t,a,s,i)}a=a||$i(t.view.doc,e.line),n||(n=N(t,a));var s=Ni(a),r=e.ch;if(!s)return o(r);for(var l,c,d=s[0].level,u=0;u<s.length;++u){var f,p,h=s[u],m=h.level%2;if(h.from<r&&h.to>r)return o(r,m);var _=m?h.to:h.from,y=m?h.from:h.to;if(_==r)p=u&&h.level<(f=s[u-1]).level?o(f.level%2?f.from:f.to-1,!0):o(m&&h.from!=h.to?r-1:r),m==d?l=p:c=p;else if(y==r){var f=u<s.length-1&&s[u+1];if(!m&&f&&f.from==f.to)continue;p=f&&h.level<f.level?o(f.level%2?f.to-1:f.from):o(m?r:r-1,!0),m==d?l=p:c=p}}return d&&!r&&(c=o(s[0].to-1)),l?(c&&(l.other=c),l):c}function F(t,e,i){var a=t.view.doc;if(i+=t.display.viewOffset,0>i)return{line:0,ch:0,outside:!0};var n=Oi(a,i);if(n>=a.size)return{line:a.size-1,ch:$i(a,a.size-1).text.length};for(0>e&&(e=0);;){var o=$i(a,n),s=H(t,o,n,e,i),r=li(o);if(!r||s.ch!=ya(o))return s;n=r.find().to.line}}function H(t,e,i,a,n){function o(a){var n=z(t,{line:i,ch:a},"line",e,c);return r=!0,s>n.bottom?Math.max(0,n.left-l):s<n.top?n.left+l:(r=!1,n.left)}var s=n-Bi(t,e),r=!1,l=t.display.wrapper.clientWidth,c=N(t,e),d=Ni(e),u=e.text.length,f=_a(e),p=ya(e),h=O(t.display),m=o(p);if(a>m)return{line:i,ch:p,outside:r};for(;;){if(d?p==f||p==ba(e,f,1):1>=p-f){for(var _=m-a>a-h,y=_?f:p;hn.test(e.text.charAt(y));)++y;return{line:i,ch:y,after:_,outside:r}}var g=Math.ceil(u/2),v=f+g;if(d){v=f;for(var b=0;g>b;++b)v=ba(e,v,1)}var x=o(v);x>a?(p=v,m=x,r&&(m+=1e3),u-=g):(f=v,h=x,u=g)}}function Y(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==wa){wa=ra("pre");for(var e=0;49>e;++e)wa.appendChild(document.createTextNode("x")),wa.appendChild(ra("br"));wa.appendChild(document.createTextNode("x"))}ca(t.measure,wa);var i=wa.offsetHeight/50;return i>3&&(t.cachedTextHeight=i),la(t.measure),i||1}function R(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=ra("span","x"),i=ra("pre",[e]);ca(t.measure,i);var a=e.offsetWidth;return a>2&&(t.cachedCharWidth=a),a||10}function G(t){t.curOp?++t.curOp.depth:t.curOp={depth:1,changes:[],delayedCallbacks:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,updateMaxLine:!1,id:++t.nextOpId}}function V(t){var e=t.curOp;if(!--e.depth){t.curOp=null;var i=t.view,a=t.display;if(e.updateMaxLine&&d(i),i.maxLineChanged&&!t.options.lineWrapping){var n=B(t,i.maxLine,i.maxLine.text.length).right;a.sizer.style.minWidth=n+3+dn+"px",i.maxLineChanged=!1}var o,s;if(e.selectionChanged){var r=z(t,i.sel.head);o=We(t,r.left,r.top,r.left,r.bottom)}(e.changes.length||o&&null!=o.scrollTop)&&(s=g(t,e.changes,o&&o.scrollTop)),!s&&e.selectionChanged&&C(t),o&&Ne(t),e.selectionChanged&&T(t),i.focused&&e.updateInput&&K(t,e.userSelChange),e.textChanged&&Ui(t,"change",t,e.textChanged),e.selectionChanged&&Ui(t,"cursorActivity",t);for(var l=0;l<e.delayedCallbacks.length;++l)e.delayedCallbacks[l](t)}}function q(t,e){return function(){var i=t||this;G(i);try{var a=e.apply(i,arguments)}finally{V(i)}return a}}function U(t,e,i,a){t.curOp.changes.push({from:e,to:i,diff:a})}function Z(t){t.view.pollingFast||t.display.poll.set(t.options.pollInterval,function(){J(t),t.view.focused&&Z(t)})}function X(t){function e(){var a=J(t);a||i?(t.display.pollingFast=!1,Z(t)):(i=!0,t.display.poll.set(60,e))}var i=!1;t.display.pollingFast=!0,t.display.poll.set(20,e)}function J(t){var e=t.display.input,i=t.display.prevInput,a=t.view,n=a.sel;if(!a.focused||bn(e)||te(t))return!1;var o=e.value;if(o==i&&De(n.from,n.to))return!1;G(t),a.sel.shift=!1;for(var s=0,r=Math.min(i.length,o.length);r>s&&i[s]==o[s];)++s;var l=n.from,c=n.to;s<i.length?l={line:l.line,ch:l.ch-(i.length-s)}:a.overwrite&&De(l,c)&&!t.display.pasteIncoming&&(c={line:c.line,ch:Math.min($i(t.view.doc,c.line).text.length,c.ch+(o.length-s))});var d=t.curOp.updateInput;return be(t,l,c,vn(o.slice(s)),"end",t.display.pasteIncoming?"paste":"input",{from:l,to:c}),t.curOp.updateInput=d,o.length>1e3?e.value=t.display.prevInput="":t.display.prevInput=o,V(t),t.display.pasteIncoming=!1,!0}function K(t,e){var i,a,n=t.view;De(n.sel.from,n.sel.to)?e&&(t.display.prevInput=t.display.input.value=""):(t.display.prevInput="",i=xn&&(n.sel.to.line-n.sel.from.line>100||(a=t.getSelection()).length>1e3),t.display.input.value=i?"-":a||t.getSelection(),n.focused&&ea(t.display.input)),t.display.inaccurateSelection=i}function Q(t){"nocursor"==t.options.readOnly||!$a&&document.activeElement==t.display.input||t.display.input.focus()}function te(t){return t.options.readOnly||t.view.cantEdit}function ee(t){function e(){t.view.focused&&setTimeout(na(Q,t),0)}function i(e){t.options.onDragEvent&&t.options.onDragEvent(t,Ii(e))||Hi(e)}function a(){n.inaccurateSelection&&(n.prevInput="",n.inaccurateSelection=!1,n.input.value=t.getSelection(),ea(n.input))}var n=t.display;Vi(n.scroller,"mousedown",q(t,ne)),Vi(n.scroller,"dblclick",q(t,zi)),Vi(n.lineSpace,"selectstart",function(t){ie(n,t)||zi(t)}),La||Vi(n.scroller,"contextmenu",function(e){ve(t,e)}),Vi(n.scroller,"scroll",function(){le(t,n.scroller.scrollTop),ce(t,n.scroller.scrollLeft,!0),Ui(t,"scroll",t)}),Vi(n.scrollbarV,"scroll",function(){le(t,n.scrollbarV.scrollTop)}),Vi(n.scrollbarH,"scroll",function(){ce(t,n.scrollbarH.scrollLeft)}),Vi(n.scroller,"mousewheel",function(e){de(t,e)}),Vi(n.scroller,"DOMMouseScroll",function(e){de(t,e)}),Vi(n.scrollbarH,"mousedown",e),Vi(n.scrollbarV,"mousedown",e),Vi(n.wrapper,"scroll",function(){n.wrapper.scrollTop=n.wrapper.scrollLeft=0}),Vi(window,"resize",function o(){n.cachedCharWidth=n.cachedTextHeight=null,P(t),n.wrapper.parentNode?g(t,!0):qi(window,"resize",o)}),Vi(n.input,"keyup",q(t,function(e){t.options.onKeyEvent&&t.options.onKeyEvent(t,Ii(e))||16==Gi(e,"keyCode")&&(t.view.sel.shift=!1)})),Vi(n.input,"input",na(X,t)),Vi(n.input,"keydown",q(t,me)),Vi(n.input,"keypress",q(t,_e)),Vi(n.input,"focus",na(ye,t)),Vi(n.input,"blur",na(ge,t)),t.options.dragDrop&&(Vi(n.scroller,"dragstart",function(e){re(t,e)}),Vi(n.scroller,"dragenter",i),Vi(n.scroller,"dragover",i),Vi(n.scroller,"drop",q(t,oe))),Vi(n.scroller,"paste",function(){Q(t),X(t)}),Vi(n.input,"paste",function(){n.pasteIncoming=!0,X(t)}),Vi(n.input,"cut",a),Vi(n.input,"copy",a),Wa&&Vi(n.sizer,"mouseup",function(){document.activeElement==n.input&&n.input.blur(),Q(t)})}function ie(t,e){for(var i=Yi(e);i!=t.wrapper;i=i.parentNode)if(/\bCodeMirror-(?:line)?widget\b/.test(i.className)||i.parentNode==t.sizer&&i!=t.mover)return!0}function ae(t,e,i){var a=t.display;if(!i){var n=Yi(e);if(n==a.scrollbarH||n==a.scrollbarH.firstChild||n==a.scrollbarV||n==a.scrollbarV.firstChild||n==a.scrollbarFiller)return null}var o,s,r=a.lineSpace.getBoundingClientRect();try{o=e.clientX,s=e.clientY}catch(e){return null}return F(t,o-r.left,s-r.top)}function ne(t){function e(t){if("single"==u)return void Ee(n,Le(l,c),t);if(_=Le(l,_),y=Le(l,y),"double"==u){var e=He($i(l,t.line).text,t);Se(t,_)?Ee(n,e.from,y):Ee(n,_,e.to)}else"triple"==u&&(Se(t,_)?Ee(n,y,Le(l,{line:t.line,ch:0})):Ee(n,_,Le(l,{line:t.line+1,ch:0})))}function i(t){var a=++v,r=ae(n,t,!0);if(r)if(De(r,h)){var c=t.clientY<g.top?-20:t.clientY>g.bottom?20:0;c&&setTimeout(q(n,function(){v==a&&(o.scroller.scrollTop+=c,i(t))}),50)}else{s.focused||ye(n),h=r,e(r);var d=p(o,l);(r.line>=d.to||r.line<d.from)&&setTimeout(q(n,function(){v==a&&i(t)}),150)}}function a(t){v=1/0;var i=ae(n,t);i&&e(i),zi(t),Q(n),qi(document,"mousemove",b),qi(document,"mouseup",x)}var n=this,o=n.display,s=n.view,r=s.sel,l=s.doc;if(r.shift=Gi(t,"shiftKey"),ie(o,t))return void(Oa||(o.scroller.draggable=!1,setTimeout(function(){o.scroller.draggable=!0},100)));if(!se(n,t)){var c=ae(n,t);switch(Ri(t)){case 3:return void(La&&ve.call(n,n,t));case 2:return c&&Ee(n,c),setTimeout(na(Q,n),20),void zi(t)}if(!c)return void(Yi(t)==o.scroller&&zi(t));s.focused||ye(n);var d=+new Date,u="single";if(Ca&&Ca.time>d-400&&De(Ca.pos,c))u="triple",zi(t),setTimeout(na(Q,n),20),Ye(n,c.line);else if(ka&&ka.time>d-400&&De(ka.pos,c)){u="double",Ca={time:d,pos:c},zi(t);var f=He($i(l,c.line).text,c);Ee(n,f.from,f.to)}else ka={time:d,pos:c};var h=c;if(n.options.dragDrop&&mn&&!te(n)&&!De(r.from,r.to)&&!Se(c,r.from)&&!Se(r.to,c)&&"single"==u){var m=q(n,function(e){Oa&&(o.scroller.draggable=!1),s.draggingText=!1,qi(document,"mouseup",m),qi(o.scroller,"drop",m),Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)<10&&(zi(e),Ee(n,c),Q(n))});return Oa&&(o.scroller.draggable=!0),s.draggingText=m,o.scroller.dragDrop&&o.scroller.dragDrop(),Vi(document,"mouseup",m),void Vi(o.scroller,"drop",m)}zi(t),"single"==u&&Ee(n,Le(l,c));var _=r.from,y=r.to,g=o.wrapper.getBoundingClientRect(),v=0,b=q(n,function(t){$a||Ri(t)?i(t):a(t)}),x=q(n,a);Vi(document,"mousemove",b),Vi(document,"mouseup",x)}}function oe(t){var e=this;if(!e.options.onDragEvent||!e.options.onDragEvent(e,Ii(t))){zi(t);var i=ae(e,t,!0),a=t.dataTransfer.files;if(i&&!te(e))if(a&&a.length&&window.FileReader&&window.File)for(var n=a.length,o=Array(n),s=0,r=function(t,a){var r=new FileReader;r.onload=function(){o[a]=r.result,++s==n&&(i=Le(e.view.doc,i),q(e,function(){var t=Ce(e,o.join(""),i,i,"paste");Ae(e,i,t)})())},r.readAsText(t)},l=0;n>l;++l)r(a[l],l);else{if(e.view.draggingText&&!Se(i,e.view.sel.from)&&!Se(e.view.sel.to,i))return e.view.draggingText(t),void($a&&setTimeout(na(Q,e),50));try{var o=t.dataTransfer.getData("Text");if(o){var c=e.view.sel.from,d=e.view.sel.to;Ae(e,i,i),e.view.draggingText&&Ce(e,"",c,d,"paste"),e.replaceSelection(o,null,"paste"),Q(e),ye(e)}}catch(t){}}}}function se(t,e){var i=t.display;try{var a=e.clientX,n=e.clientY}catch(e){return!1}if(a>=Math.floor(i.gutters.getBoundingClientRect().right))return!1;if(zi(e),!Xi(t,"gutterClick"))return!0;var o=i.lineDiv.getBoundingClientRect();if(n>o.bottom)return!0;n-=o.top-i.viewOffset;for(var s=0;s<t.options.gutters.length;++s){var r=i.gutters.childNodes[s];if(r&&r.getBoundingClientRect().right>=a){var l=Oi(t.view.doc,n),c=t.options.gutters[s];Zi(t,t,"gutterClick",t,l,c,e);break}}return!0}function re(t,e){var i=t.getSelection();e.dataTransfer.setData("Text",i),e.dataTransfer.setDragImage&&!Pa&&e.dataTransfer.setDragImage(ra("img"),0,0)}function le(t,e){Math.abs(t.view.scrollTop-e)<2||(t.view.scrollTop=e,La||g(t,[],e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e),t.display.scrollbarV.scrollTop!=e&&(t.display.scrollbarV.scrollTop=e),La&&g(t,[]))}function ce(t,e,i){(i?e==t.view.scrollLeft:Math.abs(t.view.scrollLeft-e)<2)||(t.view.scrollLeft=e,h(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbarH.scrollLeft!=e&&(t.display.scrollbarH.scrollLeft=e))}function de(t,e){var i=e.wheelDeltaX,a=e.wheelDeltaY;if(null==i&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(i=e.detail),null==a&&e.detail&&e.axis==e.VERTICAL_AXIS?a=e.detail:null==a&&(a=e.wheelDelta),a&&Ra&&Oa)for(var n=e.target;n!=o;n=n.parentNode)if(n.lineObj){t.display.currentWheelTarget=n;break}var o=t.display.scroller;if(i&&!La&&!ja&&null!=Ua)return a&&le(t,Math.max(0,Math.min(o.scrollTop+a*Ua,o.scrollHeight-o.clientHeight))),ce(t,Math.max(0,Math.min(o.scrollLeft+i*Ua,o.scrollWidth-o.clientWidth))),zi(e),void(Ta=null);if(a&&null!=Ua){var s=a*Ua,r=t.view.scrollTop,l=r+t.display.wrapper.clientHeight;0>s?r=Math.max(0,r+s-50):l=Math.min(t.view.doc.height,l+s+50),g(t,[],{top:r,bottom:l})}20>qa&&(null==Ta?(Ta=o.scrollLeft,Ma=o.scrollTop,Da=i,Sa=a,setTimeout(function(){if(null!=Ta){var t=o.scrollLeft-Ta,e=o.scrollTop-Ma,i=e&&Sa&&e/Sa||t&&Da&&t/Da;Ta=Ma=null,i&&(Ua=(Ua*qa+i)/(qa+1),++qa)}},200)):(Da+=i,Sa+=a))}function ue(t,e,i){if("string"==typeof e&&(e=sn[e],!e))return!1;t.display.pollingFast&&J(t)&&(t.display.pollingFast=!1);var a=t.view,n=a.sel.shift;try{te(t)&&(a.suppressEdits=!0),i&&(a.sel.shift=!1),e(t)}catch(o){if(o!=un)throw o;return!1}finally{a.sel.shift=n,a.suppressEdits=!1}return!0}function fe(t){var e=t.view.keyMaps.slice(0);return e.push(t.options.keyMap),t.options.extraKeys&&e.unshift(t.options.extraKeys),e}function pe(t,e){function i(){l=!0}var a=qe(t.options.keyMap),n=a.auto;clearTimeout(Za),n&&!Ze(e)&&(Za=setTimeout(function(){qe(t.options.keyMap)==a&&(t.options.keyMap=n.call?n.call(null,t):n)},50));var o=wn[Gi(e,"keyCode")],s=!1,r=Ra&&(ja||Ba);if(null==o||e.altGraphKey)return!1;Gi(e,"altKey")&&(o="Alt-"+o),Gi(e,r?"metaKey":"ctrlKey")&&(o="Ctrl-"+o),Gi(e,r?"ctrlKey":"metaKey")&&(o="Cmd-"+o);var l=!1,c=fe(t);return s=Gi(e,"shiftKey")?Ue("Shift-"+o,c,function(e){return ue(t,e,!0)},i)||Ue(o,c,function(e){return"string"==typeof e&&/^go[A-Z]/.test(e)?ue(t,e):void 0},i):Ue(o,c,function(e){return ue(t,e)},i),l&&(s=!1),s&&(zi(e),T(t),Aa&&(e.oldKeyCode=e.keyCode,e.keyCode=0)),s}function he(t,e,i){var a=Ue("'"+i+"'",fe(t),function(e){return ue(t,e,!0)});return a&&(zi(e),T(t)),a}function me(t){var e=this;if(e.view.focused||ye(e),$a&&27==t.keyCode&&(t.returnValue=!1),!e.options.onKeyEvent||!e.options.onKeyEvent(e,Ii(t))){var i=Gi(t,"keyCode");e.view.sel.shift=16==i||Gi(t,"shiftKey");var a=pe(e,t);ja&&(Ja=a?i:null,a||88!=i||xn||!Gi(t,Ra?"metaKey":"ctrlKey")||e.replaceSelection(""))}}function _e(t){var e=this;if(!e.options.onKeyEvent||!e.options.onKeyEvent(e,Ii(t))){var i=Gi(t,"keyCode"),a=Gi(t,"charCode");if(ja&&i==Ja)return Ja=null,void zi(t);if(!(ja&&(!t.which||t.which<10)||Wa)||!pe(e,t)){var n=String.fromCharCode(null==a?i:a);this.options.electricChars&&this.view.mode.electricChars&&this.options.smartIndent&&!te(this)&&this.view.mode.electricChars.indexOf(n)>-1&&setTimeout(q(e,function(){Ie(e,e.view.sel.to.line,"smart")}),75),he(e,t,n)||X(e)}}}function ye(t){"nocursor"!=t.options.readOnly&&(t.view.focused||(Ui(t,"focus",t),t.view.focused=!0,-1==t.display.scroller.className.search(/\bCodeMirror-focused\b/)&&(t.display.scroller.className+=" CodeMirror-focused"),K(t,!0)),Z(t),T(t))}function ge(t){t.view.focused&&(Ui(t,"blur",t),t.view.focused=!1,t.display.scroller.className=t.display.scroller.className.replace(" CodeMirror-focused","")),clearInterval(t.display.blinker),setTimeout(function(){t.view.focused||(t.view.sel.shift=!1)},150)}function ve(t,e){function i(){if(a.inputDiv.style.position="relative",a.input.style.cssText=r,Aa&&(a.scrollbarV.scrollTop=a.scroller.scrollTop=s),Z(t),null!=a.input.selectionStart){clearTimeout(Xa);var e=a.input.value=" "+(De(n.from,n.to)?"":a.input.value),i=0;a.prevInput=" ",a.input.selectionStart=1,a.input.selectionEnd=e.length,Xa=setTimeout(function o(){" "==a.prevInput&&0==a.input.selectionStart?q(t,sn.selectAll)(t):i++<10?Xa=setTimeout(o,500):K(t)},200)}}var a=t.display,n=t.view.sel,o=ae(t,e),s=a.scroller.scrollTop;if(o&&!ja){(De(n.from,n.to)||Se(o,n.from)||!Se(o,n.to))&&q(t,Ae)(t,o,o);var r=a.input.style.cssText;a.inputDiv.style.position="absolute",a.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",Q(t),K(t,!0),De(n.from,n.to)&&(a.input.value=a.prevInput=" "),La?(Hi(e),Vi(window,"mouseup",function l(){qi(window,"mouseup",l),setTimeout(i,20)
})):setTimeout(i,50)}}function be(t,e,i,a,n,o){var s=Ga&&oi(t.view.doc,e,i);if(!s)return xe(t,e,i,a,n,o);for(var r=s.length-1;r>=1;--r)xe(t,s[r].from,s[r].to,[""],o);return s.length?xe(t,s[0].from,s[0].to,a,n,o):void 0}function xe(t,e,i,a,n,o){if(!t.view.suppressEdits){var s=t.view,r=s.doc,l=[];r.iter(e.line,i.line+1,function(t){l.push(hi(t.text,t.markedSpans))});var c=s.sel.from,d=s.sel.to,u=ni(pi(l[0]),pi(ta(l)),e.ch,i.ch,a),f=ke(t,e,i,u,n,o);return s.history&&Pi(t,e.line,a.length,l,o,c,d,s.sel.from,s.sel.to),f}}function we(t,e){var i=t.view.doc,a=t.view.history,n=("undo"==e?a.done:a.undone).pop();if(n){for(var o={events:[],fromBefore:n.fromAfter,toBefore:n.toAfter,fromAfter:n.fromBefore,toAfter:n.toBefore},s=n.events.length-1;s>=0;s-=1){a.dirtyCounter+="undo"==e?-1:1;var r=n.events[s],l=[],c=r.start+r.added;i.iter(r.start,c,function(t){l.push(hi(t.text,t.markedSpans))}),o.events.push({start:r.start,added:r.old.length,old:l});var d=s?null:{from:n.fromBefore,to:n.toBefore};ke(t,{line:r.start,ch:0},{line:c-1,ch:$i(i,c-1).text.length},r.old,d,e)}("undo"==e?a.undone:a.done).push(o)}}function ke(t,e,i,a,n,o){var s=t.view,r=s.doc,l=t.display;if(!s.suppressEdits){var d=i.line-e.line,u=$i(r,e.line),f=$i(r,i.line),p=!1,h=e.line;t.options.lineWrapping||(h=Ai(ci(r,u)),r.iter(h,i.line+1,function(t){return c(r,t)==s.maxLineLength?(p=!0,!0):void 0}));var m=ta(a),_=Y(l);if(0==e.ch&&0==i.ch&&""==fi(m)){for(var y=[],g=0,v=a.length-1;v>g;++g)y.push(yi(fi(a[g]),pi(a[g]),_));gi(t,f,f.text,pi(m)),d&&r.remove(e.line,d,t),y.length&&r.insert(e.line,y)}else if(u==f)if(1==a.length)gi(t,u,u.text.slice(0,e.ch)+fi(a[0])+u.text.slice(i.ch),pi(a[0]));else{for(var y=[],g=1,v=a.length-1;v>g;++g)y.push(yi(fi(a[g]),pi(a[g]),_));y.push(yi(fi(m)+u.text.slice(i.ch),pi(m),_)),gi(t,u,u.text.slice(0,e.ch)+fi(a[0]),pi(a[0])),r.insert(e.line+1,y)}else if(1==a.length)gi(t,u,u.text.slice(0,e.ch)+fi(a[0])+f.text.slice(i.ch),pi(a[0])),r.remove(e.line+1,d,t);else{var y=[];gi(t,u,u.text.slice(0,e.ch)+fi(a[0]),pi(a[0])),gi(t,f,fi(m)+f.text.slice(i.ch),pi(m));for(var g=1,v=a.length-1;v>g;++g)y.push(yi(fi(a[g]),pi(a[g]),_));d>1&&r.remove(e.line+1,d-1,t),r.insert(e.line+1,y)}if(t.options.lineWrapping){var b=Math.max(5,l.scroller.clientWidth/R(l)-3);r.iter(e.line,e.line+a.length,function(t){if(0!=t.height){var e=(Math.ceil(t.text.length/b)||1)*_;e!=t.height&&Ei(t,e)}})}else r.iter(h,e.line+a.length,function(t){var e=c(r,t);e>s.maxLineLength&&(s.maxLine=t,s.maxLineLength=e,s.maxLineChanged=!0,p=!1)}),p&&(t.curOp.updateMaxLine=!0);s.frontier=Math.min(s.frontier,e.line),M(t,400);var x=a.length-d-1;if(U(t,e.line,i.line+1,x),Xi(t,"change")){for(var g=0;g<a.length;++g)"string"!=typeof a[g]&&(a[g]=a[g].text);var w={from:e,to:i,text:a,origin:o};if(t.curOp.textChanged){for(var k=t.curOp.textChanged;k.next;k=k.next);k.next=w}else t.curOp.textChanged=w}var C,D,S={line:e.line+a.length-1,ch:fi(m).length+(1==a.length?e.ch:0)};if(n&&"string"!=typeof n)n.from?(C=n.from,D=n.to):C=D=n;else if("end"==n)C=D=S;else if("start"==n)C=D=e;else if("around"==n)C=e,D=S;else{var T=function(t){if(Se(t,e))return t;if(!Se(i,t))return S;var a=t.line+x,n=t.ch;return t.line==i.line&&(n+=fi(m).length-(i.ch-(i.line==e.line?e.ch:0))),{line:a,ch:n}};C=T(s.sel.from),D=T(s.sel.to)}return Ae(t,C,D,null,!0),S}}function Ce(t,e,i,a,n){if(a||(a=i),Se(a,i)){var o=a;a=i,i=o}return be(t,i,a,vn(e),null,n)}function De(t,e){return t.line==e.line&&t.ch==e.ch}function Se(t,e){return t.line<e.line||t.line==e.line&&t.ch<e.ch}function Te(t){return{line:t.line,ch:t.ch}}function Me(t,e){return Math.max(0,Math.min(e,t.size-1))}function Le(t,e){if(e.line<0)return{line:0,ch:0};if(e.line>=t.size)return{line:t.size-1,ch:$i(t,t.size-1).text.length};var i=e.ch,a=$i(t,e.line).text.length;return null==i||i>a?{line:e.line,ch:a}:0>i?{line:e.line,ch:0}:e}function $e(t,e){return e>=0&&e<t.size}function Ee(t,e,i,a){var n=t.view.sel;if(n.shift||n.extend){var o=n.anchor;if(i){var s=Se(e,o);s!=Se(i,o)?(o=e,e=i):s!=Se(e,i)&&(e=i)}Ae(t,o,e,a)}else Ae(t,e,i||e,a);t.curOp.userSelChange=!0}function Ae(t,e,i,a,n){t.view.goalColumn=null;var o=t.view.sel;if((n||!De(e,o.anchor))&&(e=Be(t,e,a,"push"!=n)),(n||!De(i,o.head))&&(i=Be(t,i,a,"push"!=n)),!De(o.anchor,e)||!De(o.head,i)){o.anchor=e,o.head=i;var s=Se(i,e);o.from=s?i:e,o.to=s?e:i,t.curOp.updateInput=!0,t.curOp.selectionChanged=!0}}function Oe(t){Ae(t,t.view.sel.from,t.view.sel.to,null,"push")}function Be(t,e,i,a){var n=t.view.doc,o=!1,s=e,r=i||1;t.view.cantEdit=!1;t:for(;;){var l,c=$i(n,s.line);if(c.markedSpans){for(var d=0;d<c.markedSpans.length;++d){var u=c.markedSpans[d],f=u.marker;if((null==u.from||(f.inclusiveLeft?u.from<=s.ch:u.from<s.ch))&&(null==u.to||(f.inclusiveRight?u.to>=s.ch:u.to>s.ch))){if(a&&f.clearOnEnter){(l||(l=[])).push(f);continue}if(!f.atomic)continue;var p=f.find()[0>r?"from":"to"];if(De(p,s)&&(p.ch+=r,p.ch<0?p=p.line?Le(n,{line:p.line-1}):null:p.ch>c.text.length&&(p=p.line<n.size-1?{line:p.line+1,ch:0}:null),!p)){if(o)return a?(t.view.cantEdit=!0,{line:0,ch:0}):Be(t,e,i,!0);o=!0,p=e,r=-r}s=p;continue t}}if(l)for(var d=0;d<l.length;++d)l[d].clear()}return s}}function Ne(t){var e=t.view,i=je(t,e.sel.head);if(e.focused){var a=t.display,n=a.sizer.getBoundingClientRect(),o=null;if(i.top+n.top<0?o=!0:i.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(o=!1),null!=o&&!Fa){var s="none"==a.cursor.style.display;s&&(a.cursor.style.display="",a.cursor.style.left=i.left+"px",a.cursor.style.top=i.top-a.viewOffset+"px"),a.cursor.scrollIntoView(o),s&&(a.cursor.style.display="none")}}}function je(t,e){for(;;){var i=!1,a=z(t,e),n=We(t,a.left,a.top,a.left,a.bottom),o=t.view.scrollTop,s=t.view.scrollLeft;if(null!=n.scrollTop&&(le(t,n.scrollTop),Math.abs(t.view.scrollTop-o)>1&&(i=!0)),null!=n.scrollLeft&&(ce(t,n.scrollLeft),Math.abs(t.view.scrollLeft-s)>1&&(i=!0)),!i)return a}}function Pe(t,e,i,a,n){var o=We(t,e,i,a,n);null!=o.scrollTop&&le(t,o.scrollTop),null!=o.scrollLeft&&ce(t,o.scrollLeft)}function We(t,e,i,a,n){var o=t.display,s=A(o);i+=s,n+=s;var r=o.scroller.clientHeight-dn,l=o.scroller.scrollTop,c={},d=t.view.doc.height+2*s,u=s+10>i,f=n+s>d-10;l>i?c.scrollTop=u?0:Math.max(0,i):n>l+r&&(c.scrollTop=(f?d:n)-r);var p=o.scroller.clientWidth-dn,h=o.scroller.scrollLeft;e+=o.gutters.offsetWidth,a+=o.gutters.offsetWidth;var m=o.gutters.offsetWidth,_=m+10>e;return h+m>e||_?(_&&(e=0),c.scrollLeft=Math.max(0,e-10-m)):a>p+h-3&&(c.scrollLeft=a+10-p),c}function Ie(t,e,i,a){var n=t.view.doc;if(i||(i="add"),"smart"==i)if(t.view.mode.indent)var o=E(t,e);else i="prev";var s,r=t.options.tabSize,l=$i(n,e),c=Ki(l.text,null,r),d=l.text.match(/^\s*/)[0];if("smart"==i&&(s=t.view.mode.indent(o,l.text.slice(d.length),l.text),s==un)){if(!a)return;i="prev"}"prev"==i?s=e?Ki($i(n,e-1).text,null,r):0:"add"==i?s=c+t.options.indentUnit:"subtract"==i&&(s=c-t.options.indentUnit),s=Math.max(0,s);var u="",f=0;if(t.options.indentWithTabs)for(var p=Math.floor(s/r);p;--p)f+=r,u+="	";s>f&&(u+=Qi(s-f)),u!=d&&Ce(t,u,{line:e,ch:0},{line:e,ch:d.length},"input"),l.stateAfter=null}function ze(t,e,i){var a=e,n=e,o=t.view.doc;return"number"==typeof e?n=$i(o,Me(o,e)):a=Ai(e),null==a?null:i(n,a)?(U(t,a,a+1),n):null}function Fe(t,e,i,a){function n(){var t=l+e;return 0>t||t==s.size?!1:(l=t,d=$i(s,t))}function o(t){var i=(a?ba:xa)(d,c,e,!0);if(null==i){if(t||!n())return!1;c=a?(0>e?ya:_a)(d):0>e?d.text.length:0}else c=i;return!0}var s=t.view.doc,r=t.view.sel.head,l=r.line,c=r.ch,d=$i(s,l);if("char"==i)o();else if("column"==i)o(!0);else if("word"==i)for(var u=!1;!(0>e)||o();){if(oa(d.text.charAt(c)))u=!0;else if(u){0>e&&(e=1,o());break}if(e>0&&!o())break}return Be(t,{line:l,ch:c},e,!0)}function He(t,e){var i=e.ch,a=e.ch;if(t){e.after===!1||a==t.length?--i:++a;for(var n=t.charAt(i),o=oa(n)?oa:/\s/.test(n)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!oa(t)};i>0&&o(t.charAt(i-1));)--i;for(;a<t.length&&o(t.charAt(a));)++a}return{from:{line:e.line,ch:i},to:{line:e.line,ch:a}}}function Ye(t,e){Ee(t,{line:e,ch:0},Le(t.view.doc,{line:e+1,ch:0}))}function Re(e,i,a,n){t.defaults[e]=i,a&&(Ka[e]=n?function(t,e,i){i!=tn&&a(t,e,i)}:a)}function Ge(t,e){if(e===!0)return e;if(t.copyState)return t.copyState(e);var i={};for(var a in e){var n=e[a];n instanceof Array&&(n=n.concat([])),i[a]=n}return i}function Ve(t,e,i){return t.startState?t.startState(e,i):!0}function qe(t){return"string"==typeof t?rn[t]:t}function Ue(t,e,i,a){function n(e){e=qe(e);var o=e[t];if(o===!1)return a&&a(),!0;if(null!=o&&i(o))return!0;if(e.nofallthrough)return a&&a(),!0;var s=e.fallthrough;if(null==s)return!1;if("[object Array]"!=Object.prototype.toString.call(s))return n(s);for(var r=0,l=s.length;l>r;++r)if(n(s[r]))return!0;return!1}for(var o=0;o<e.length;++o)if(n(e[o]))return!0}function Ze(t){var e=wn[Gi(t,"keyCode")];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Xe(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8}function Je(t,e){this.lines=[],this.type=e,this.cm=t}function Ke(t,e,i,a,n){var o=t.view.doc,s=new Je(t,n);if("range"==n&&!Se(e,i))return s;if(a)for(var r in a)a.hasOwnProperty(r)&&(s[r]=a[r]);s.replacedWith&&(s.collapsed=!0,s.replacedWith=ra("span",[s.replacedWith],"CodeMirror-widget")),s.collapsed&&(Va=!0);var l,c,d=e.line,u=0;if(o.iter(d,i.line+1,function(t){var a={from:null,to:null,marker:s};u+=t.text.length,d==e.line&&(a.from=e.ch,u-=e.ch),d==i.line&&(a.to=i.ch,u-=t.text.length-i.ch),s.collapsed&&(d==i.line&&(c=si(t,i.ch)),d==e.line?l=si(t,e.ch):Ei(t,0)),ei(t,a),s.collapsed&&d==e.line&&di(t)&&Ei(t,0),++d}),s.readOnly&&(Ga=!0,(t.view.history.done.length||t.view.history.undone.length)&&t.clearHistory()),s.collapsed){if(l!=c)throw new Error("Inserting collapsed marker overlapping an existing one");s.size=u,s.atomic=!0}return(s.className||s.startStyle||s.endStyle||s.collapsed)&&U(t,e.line,i.line+1),s.atomic&&Oe(t),s}function Qe(t,e){if(t)for(var i=0;i<t.length;++i){var a=t[i];if(a.marker==e)return a}}function ti(t,e){for(var i,a=0;a<t.length;++a)t[a]!=e&&(i||(i=[])).push(t[a]);return i}function ei(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.lines.push(t)}function ii(t,e){if(t)for(var i,a=0;a<t.length;++a){var n=t[a],o=n.marker,s=null==n.from||(o.inclusiveLeft?n.from<=e:n.from<e);if(s||"bookmark"==o.type&&n.from==e){var r=null==n.to||(o.inclusiveRight?n.to>=e:n.to>e);(i||(i=[])).push({from:n.from,to:r?null:n.to,marker:o})}}return i}function ai(t,e,i){if(t)for(var a,n=0;n<t.length;++n){var o=t[n],s=o.marker,r=null==o.to||(s.inclusiveRight?o.to>=i:o.to>i);if(r||"bookmark"==s.type&&o.from==i&&o.from!=e){var l=null==o.from||(s.inclusiveLeft?o.from<=i:o.from<i);(a||(a=[])).push({from:l?null:o.from-i,to:null==o.to?null:o.to-i,marker:s})}}return a}function ni(t,e,i,a,n){if(!t&&!e)return n;var o=ii(t,i),s=ai(e,i,a),r=1==n.length,l=ta(n).length+(r?i:0);if(o)for(var c=0;c<o.length;++c){var d=o[c];if(null==d.to){var u=Qe(s,d.marker);u?r&&(d.to=null==u.to?null:u.to+l):d.to=i}}if(s)for(var c=0;c<s.length;++c){var d=s[c];if(null!=d.to&&(d.to+=l),null==d.from){var u=Qe(o,d.marker);u||(d.from=l,r&&(o||(o=[])).push(d))}else d.from+=l,r&&(o||(o=[])).push(d)}var f=[hi(n[0],o)];if(!r){var p,h=n.length-2;if(h>0&&o)for(var c=0;c<o.length;++c)null==o[c].to&&(p||(p=[])).push({from:null,to:null,marker:o[c].marker});for(var c=0;h>c;++c)f.push(hi(n[c+1],p));f.push(hi(ta(n),s))}return f}function oi(t,e,i){var a=null;if(t.iter(e.line,i.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var i=t.markedSpans[e].marker;!i.readOnly||a&&-1!=ia(a,i)||(a||(a=[])).push(i)}}),!a)return null;for(var n=[{from:e,to:i}],o=0;o<a.length;++o)for(var s=a[o].find(),r=0;r<n.length;++r){var l=n[r];if(Se(s.from,l.to)&&!Se(s.to,l.from)){var c=[r,1];Se(l.from,s.from)&&c.push({from:l.from,to:s.from}),Se(s.to,l.to)&&c.push({from:s.to,to:l.to}),n.splice.apply(n,c),r+=c.length-1}}return n}function si(t,e){var i,a=Va&&t.markedSpans;if(a)for(var n,o=0;o<a.length;++o)n=a[o],n.marker.collapsed&&(null==n.from||n.from<e)&&(null==n.to||n.to>e)&&(!i||i.width<n.marker.width)&&(i=n.marker);return i}function ri(t){return si(t,-1)}function li(t){return si(t,t.text.length+1)}function ci(t,e){for(var i;i=ri(e);)e=$i(t,i.find().from.line);return e}function di(t){var e=Va&&t.markedSpans;if(e)for(var i,a=0;a<e.length;++a)if(i=e[a],i.marker.collapsed){if(null==i.from)return!0;if(0==i.from&&i.marker.inclusiveLeft&&ui(t,i))return!0}}function ui(t,e){if(null==e.to||e.marker.inclusiveRight&&e.to==t.text.length)return!0;for(var i,a=0;a<t.markedSpans.length;++a)if(i=t.markedSpans[a],i.marker.collapsed&&i.from==e.to&&(i.marker.inclusiveLeft||e.marker.inclusiveRight)&&ui(t,i))return!0}function fi(t){return"string"==typeof t?t:t.text}function pi(t){if("string"==typeof t)return null;for(var e=t.markedSpans,i=null,a=0;a<e.length;++a)e[a].marker.explicitlyCleared?i||(i=e.slice(0,a)):i&&i.push(e[a]);return i?i.length?i:null:e}function hi(t,e){return e?{text:t,markedSpans:e}:t}function mi(t){var e=t.markedSpans;if(e){for(var i=0;i<e.length;++i){var a=e[i].marker.lines,n=ia(a,t);a.splice(n,1)}t.markedSpans=null}}function _i(t,e){if(e){for(var i=0;i<e.length;++i)e[i].marker.lines.push(t);t.markedSpans=e}}function yi(t,e,i){var a={text:t,height:i};return _i(a,e),di(a)&&(a.height=0),a}function gi(t,e,i,a){e.text=i,e.stateAfter=e.styles=null,null!=e.order&&(e.order=null),mi(e),_i(e,a),di(e)?e.height=0:e.height||(e.height=Y(t.display)),Zi(t,e,"change")}function vi(t){t.parent=null,mi(t)}function bi(t,e,i){var a=t.view.mode,n=t.options.flattenSpans,o=!e.styles,s=0,r="",l=null,c=new Xe(e.text,t.options.tabSize),d=e.styles||(e.styles=[]);for(""==e.text&&a.blankLine&&a.blankLine(i);!c.eol();){var u=a.token(c,i),f=c.current();if(c.start=c.pos,n&&l==u?r+=f:(r&&(o=o||s>=d.length||r!=d[s]||l!=d[s+1],d[s++]=r,d[s++]=l),r=f,l=u),c.pos>5e3)break}return r&&(o=o||s>=d.length||r!=d[s]||l!=d[s+1],d[s++]=r,d[s++]=l),c.pos>5e3&&(d[s++]=e.text.slice(c.pos),d[s++]=null),s!=d.length&&(d.length=s,o=!0),o}function xi(t,e,i){var a=t.view.mode,n=new Xe(e.text,t.options.tabSize);for(""==e.text&&a.blankLine&&a.blankLine(i);!n.eol()&&n.pos<=5e3;)a.token(n,i),n.start=n.pos}function wi(t){return t?ln[t]||(ln[t]="cm-"+t.replace(/ +/g," cm-")):null}function ki(t,e,i){for(var a,n,o,s=e,r=!0;a=ri(s);)r=!1,s=$i(t.view.doc,a.find().from.line),n||(n=s);var l={pre:ra("pre"),col:0,pos:0,display:!i,measure:null,addedOne:!1,cm:t};s.textClass&&(l.pre.className=s.textClass);do{s.styles||bi(t,s,s.stateAfter=E(t,Ai(s))),l.measure=s==e&&i,l.pos=0,l.addToken=l.measure?Di:Ci,i&&o&&s!=e&&!l.addedOne&&(i[0]=l.pre.appendChild(fa(t.display.measure)),l.addedOne=!0);var c=Ti(s,l);o=s==n,c&&(s=$i(t.view.doc,c.to.line),r=!1)}while(c);return i&&!l.addedOne&&(i[0]=l.pre.appendChild(r?ra("span","\xa0"):fa(t.display.measure))),l.pre.firstChild||di(e)||l.pre.appendChild(document.createTextNode("\xa0")),l.pre}function Ci(t,e,i,a,n){if(e){if(cn.test(e))for(var o=document.createDocumentFragment(),s=0;;){cn.lastIndex=s;var r=cn.exec(e),l=r?r.index-s:e.length-s;if(l&&(o.appendChild(document.createTextNode(e.slice(s,s+l))),t.col+=l),!r)break;if(s+=l+1,"	"==r[0]){var c=t.cm.options.tabSize,d=c-t.col%c;o.appendChild(ra("span",Qi(d),"cm-tab")),t.col+=d}else{var u=ra("span","\u2022","cm-invalidchar");u.title="\\u"+r[0].charCodeAt(0).toString(16),o.appendChild(u),t.col+=1}}else{t.col+=e.length;var o=document.createTextNode(e)}if(i||a||n||t.measure){var f=i||"";return a&&(f+=a),n&&(f+=n),t.pre.appendChild(ra("span",[o],f))}t.pre.appendChild(o)}}function Di(t,e,i,a,n){for(var o=0;o<e.length;++o)o&&o<e.length-1&&t.cm.options.lineWrapping&&_n.test(e.slice(o-1,o+1))&&t.pre.appendChild(ra("wbr")),t.measure[t.pos++]=Ci(t,e.charAt(o),i,0==o&&a,o==e.length-1&&n);e.length&&(t.addedOne=!0)}function Si(t,e,i){i&&(t.display||(i=i.cloneNode(!0)),t.pre.appendChild(i),t.measure&&e&&(t.measure[t.pos]=i,t.addedOne=!0)),t.pos+=e}function Ti(t,e){var i=t.styles,a=t.markedSpans;if(a)for(var n,o,s,r,l,c=t.text,d=c.length,u=0,f=0,p="",h=0;;){if(h==u){o=s=r="",l=null,h=1/0;for(var m=null,_=0;_<a.length;++_){var y=a[_],g=y.marker;y.from<=u&&(null==y.to||y.to>u)?(null!=y.to&&h>y.to&&(h=y.to,s=""),g.className&&(o+=" "+g.className),g.startStyle&&y.from==u&&(r+=" "+g.startStyle),g.endStyle&&y.to==h&&(s+=" "+g.endStyle),g.collapsed&&(!l||l.marker.width<g.width)&&(l=y)):y.from>u&&h>y.from&&(h=y.from),"bookmark"==g.type&&y.from==u&&g.replacedWith&&(m=g.replacedWith)}if(l&&(l.from||0)==u&&(Si(e,(null==l.to?d:l.to)-u,null!=l.from&&l.marker.replacedWith),null==l.to))return l.marker.find();m&&!l&&Si(e,0,m)}if(u>=d)break;for(var v=Math.min(d,h);;){if(p){var b=u+p.length;if(!l){var x=b>v?p.slice(0,v-u):p;e.addToken(e,x,n+o,r,u+x.length==h?s:"")}if(b>=v){p=p.slice(v-u),u=v;break}u=b,r=""}p=i[f++],n=wi(i[f++])}}else for(var f=0;f<i.length;f+=2)e.addToken(e,i[f],wi(i[f+1]))}function Mi(t){this.lines=t,this.parent=null;for(var e=0,i=t.length,a=0;i>e;++e)t[e].parent=this,a+=t[e].height;this.height=a}function Li(t){this.children=t;for(var e=0,i=0,a=0,n=t.length;n>a;++a){var o=t[a];e+=o.chunkSize(),i+=o.height,o.parent=this}this.size=e,this.height=i,this.parent=null}function $i(t,e){for(;!t.lines;)for(var i=0;;++i){var a=t.children[i],n=a.chunkSize();if(n>e){t=a;break}e-=n}return t.lines[e]}function Ei(t,e){for(var i=e-t.height,a=t;a;a=a.parent)a.height+=i}function Ai(t){if(null==t.parent)return null;for(var e=t.parent,i=ia(e.lines,t),a=e.parent;a;e=a,a=a.parent)for(var n=0;a.children[n]!=e;++n)i+=a.children[n].chunkSize();return i}function Oi(t,e){var i=0;t:do{for(var a=0,n=t.children.length;n>a;++a){var o=t.children[a],s=o.height;if(s>e){t=o;continue t}e-=s,i+=o.chunkSize()}return i}while(!t.lines);for(var a=0,n=t.lines.length;n>a;++a){var r=t.lines[a],l=r.height;if(l>e)break;e-=l}return i+a}function Bi(t,e){e=ci(t.view.doc,e);for(var i=0,a=e.parent,n=0;n<a.lines.length;++n){var o=a.lines[n];if(o==e)break;i+=o.height}for(var s=a.parent;s;a=s,s=a.parent)for(var n=0;n<s.children.length;++n){var r=s.children[n];if(r==a)break;i+=r.height}return i}function Ni(t){var e=t.order;return null==e&&(e=t.order=kn(t.text)),e}function ji(){return{done:[],undone:[],lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0}}function Pi(t,e,i,a,n,o,s,r,l){var c=t.view.history;c.undone.length=0;var d=+new Date,u=ta(c.done);if(u&&(c.lastOp==t.curOp.id||c.lastOrigin==n&&("input"==n||"delete"==n)&&c.lastTime>d-600)){var f=ta(u.events);if(f.start>e+a.length||f.start+f.added<e)u.events.push({start:e,added:i,old:a});else{for(var p=Math.max(0,f.start-e),h=Math.max(0,e+a.length-(f.start+f.added)),m=p;m>0;--m)f.old.unshift(a[m-1]);for(var m=h;m>0;--m)f.old.push(a[a.length-m]);p&&(f.start=e),f.added+=i-(a.length-p-h)}u.fromAfter=r,u.toAfter=l}else{for(u={events:[{start:e,added:i,old:a}],fromBefore:o,toBefore:s,fromAfter:r,toAfter:l},c.done.push(u);c.done.length>t.options.undoDepth;)c.done.shift();c.dirtyCounter<0?c.dirtyCounter=0/0:c.dirtyCounter++}c.lastTime=d,c.lastOp=t.curOp.id,c.lastOrigin=n}function Wi(){Hi(this)}function Ii(t){return t.stop||(t.stop=Wi),t}function zi(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Fi(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function Hi(t){zi(t),Fi(t)}function Yi(t){return t.target||t.srcElement}function Ri(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),Ra&&t.ctrlKey&&1==e&&(e=3),e}function Gi(t,e){var i=t.override&&t.override.hasOwnProperty(e);return i?t.override[e]:t[e]}function Vi(t,e,i){if(t.addEventListener)t.addEventListener(e,i,!1);else if(t.attachEvent)t.attachEvent("on"+e,i);else{var a=t._handlers||(t._handlers={}),n=a[e]||(a[e]=[]);n.push(i)}}function qi(t,e,i){if(t.removeEventListener)t.removeEventListener(e,i,!1);else if(t.detachEvent)t.detachEvent("on"+e,i);else{var a=t._handlers&&t._handlers[e];if(!a)return;for(var n=0;n<a.length;++n)if(a[n]==i){a.splice(n,1);break}}}function Ui(t,e){var i=t._handlers&&t._handlers[e];if(i)for(var a=Array.prototype.slice.call(arguments,2),n=0;n<i.length;++n)i[n].apply(null,a)}function Zi(t,e,i){function a(t){return function(){t.apply(null,o)}}var n=e._handlers&&e._handlers[i];if(n)for(var o=Array.prototype.slice.call(arguments,3),s=t.curOp&&t.curOp.delayedCallbacks,r=0;r<n.length;++r)s?s.push(a(n[r])):n[r].apply(null,o)}function Xi(t,e){var i=t._handlers&&t._handlers[e];return i&&i.length>0}function Ji(){this.id=null}function Ki(t,e,i){null==e&&(e=t.search(/[^\s\u00a0]/),-1==e&&(e=t.length));for(var a=0,n=0;e>a;++a)"	"==t.charAt(a)?n+=i-n%i:++n;return n}function Qi(t){for(;fn.length<=t;)fn.push(ta(fn)+" ");return fn[t]}function ta(t){return t[t.length-1]}function ea(t){Ha?(t.selectionStart=0,t.selectionEnd=t.value.length):t.select()}function ia(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0,a=t.length;a>i;++i)if(t[i]==e)return i;return-1}function aa(t){for(var e=[],i=0;t>i;++i)e.push(void 0);return e}function na(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function oa(t){return/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||pn.test(t))}function sa(t){var e=0;for(var i in t)t.hasOwnProperty(i)&&t[i]&&++e;return!e}function ra(t,e,i,a){var n=document.createElement(t);if(i&&(n.className=i),a&&(n.style.cssText=a),"string"==typeof e)da(n,e);else if(e)for(var o=0;o<e.length;++o)n.appendChild(e[o]);return n}function la(t){return t.innerHTML="",t}function ca(t,e){return la(t).appendChild(e)}function da(t,e){Aa?(t.innerHTML="",t.appendChild(document.createTextNode(e))):t.textContent=e}function ua(t){if(null!=yn)return yn;var e=ra("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return ca(t,e),e.offsetWidth&&(yn=e.offsetHeight-e.clientHeight),yn||0}function fa(t){if(null==gn){var e=ra("span","\u200b");ca(t,ra("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(gn=e.offsetWidth<=1&&e.offsetHeight>2&&!Ea)}return gn?ra("span","\u200b"):ra("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px")}function pa(t,e,i,a){if(!t)return a(e,i,"ltr");for(var n=0;n<t.length;++n){var o=t[n];o.from<i&&o.to>e&&a(Math.max(o.from,e),Math.min(o.to,i),1==o.level?"rtl":"ltr")}}function ha(t){return t.level%2?t.to:t.from}function ma(t){return t.level%2?t.from:t.to}function _a(t){var e=Ni(t);return e?ha(e[0]):0}function ya(t){var e=Ni(t);return e?ma(ta(e)):t.text.length}function ga(t,e){var i=$i(t.view.doc,e),a=ci(t.view.doc,i);a!=i&&(e=Ai(a));var n=Ni(a),o=n?n[0].level%2?ya(a):_a(a):0;return{line:e,ch:o}}function va(t,e){for(var i,a;i=li(a=$i(t.view.doc,e));)e=i.find().to.line;var n=Ni(a),o=n?n[0].level%2?_a(a):ya(a):a.text.length;return{line:e,ch:o}}function ba(t,e,i,a){var n=Ni(t);if(!n)return xa(t,e,i,a);for(var o=a?function(e,i){do e+=i;while(e>0&&hn.test(t.text.charAt(e)));return e}:function(t,e){return t+e},s=n[0].level,r=0;r<n.length;++r){var l=n[r],c=l.level%2==s;if(l.from<e&&l.to>e||c&&(l.from==e||l.to==e))break}for(var d=o(e,l.level%2?-i:i);null!=d;)if(l.level%2==s){if(!(d<l.from||d>l.to))break;l=n[r+=i],d=l&&(i>0==l.level%2?o(l.to,-1):o(l.from,1))}else if(d==ha(l))l=n[--r],d=l&&ma(l);else{if(d!=ma(l))break;l=n[++r],d=l&&ha(l)}return 0>d||d>t.text.length?null:d}function xa(t,e,i,a){var n=e+i;if(a)for(;n>0&&hn.test(t.text.charAt(n));)n+=i;return 0>n||n>t.text.length?null:n}var wa,ka,Ca,Da,Sa,Ta,Ma,La=/gecko\/\d/i.test(navigator.userAgent),$a=/MSIE \d/.test(navigator.userAgent),Ea=/MSIE [1-7]\b/.test(navigator.userAgent),Aa=/MSIE [1-8]\b/.test(navigator.userAgent),Oa=/WebKit\//.test(navigator.userAgent),Ba=Oa&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Na=/Chrome\//.test(navigator.userAgent),ja=/Opera\//.test(navigator.userAgent),Pa=/Apple Computer/.test(navigator.vendor),Wa=/KHTML\//.test(navigator.userAgent),Ia=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),za=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Fa=/PhantomJS/.test(navigator.userAgent),Ha=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Ya=Ha||/Android|webOS|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent),Ra=Ha||/Mac/.test(navigator.platform),Ga=!1,Va=!1,qa=0,Ua=null;$a?Ua=-.53:La?Ua=15:Na?Ua=-.7:Pa&&(Ua=-1/3);var Za,Xa,Ja=null;t.prototype={getValue:function(t){var e=[],i=this.view.doc;return i.iter(0,i.size,function(t){e.push(t.text)}),e.join(t||"\n")},setValue:q(null,function(t){var e=this.view.doc,i={line:0,ch:0},a=$i(e,e.size-1).text.length;xe(this,i,{line:e.size-1,ch:a},vn(t),i,i,"setValue")}),getSelection:function(t){return this.getRange(this.view.sel.from,this.view.sel.to,t)},replaceSelection:q(null,function(t,e,i){var a=this.view.sel;be(this,a.from,a.to,vn(t),e||"around",i)}),focus:function(){window.focus(),Q(this),ye(this),X(this)},setOption:function(t,e){var i=this.options,a=i[t];(i[t]!=e||"mode"==t)&&(i[t]=e,Ka.hasOwnProperty(t)&&q(this,Ka[t])(this,e,a))},getOption:function(t){return this.options[t]},getMode:function(){return this.view.mode},addKeyMap:function(t){this.view.keyMaps.push(t)},removeKeyMap:function(t){for(var e=this.view.keyMaps,i=0;i<e.length;++i)if(("string"==typeof t?e[i].name:e[i])==t)return e.splice(i,1),!0},undo:q(null,function(){we(this,"undo")}),redo:q(null,function(){we(this,"redo")}),indentLine:q(null,function(t,e,i){"string"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),$e(this.view.doc,t)&&Ie(this,t,e,i)}),indentSelection:q(null,function(t){var e=this.view.sel;if(De(e.from,e.to))return Ie(this,e.from.line,t);for(var i=e.to.line-(e.to.ch?0:1),a=e.from.line;i>=a;++a)Ie(this,a,t)}),historySize:function(){var t=this.view.history;return{undo:t.done.length,redo:t.undone.length}},clearHistory:function(){this.view.history=ji()},markClean:function(){this.view.history.dirtyCounter=0,this.view.history.lastOp=this.view.history.lastOrigin=null},isClean:function(){return 0==this.view.history.dirtyCounter},getHistory:function(){function t(t){for(var e,i=0,a=[];i<t.length;++i){var n=t[i];a.push({events:e=[],fromBefore:n.fromBefore,toBefore:n.toBefore,fromAfter:n.fromAfter,toAfter:n.toAfter});for(var o=0,s=n.events;o<s.length;++o){var r=[],l=s[o];e.push({start:l.start,added:l.added,old:r});for(var c=0;c<l.old.length;++c)r.push(fi(l.old[c]))}}return a}var e=this.view.history;return{done:t(e.done),undone:t(e.undone)}},setHistory:function(t){var e=this.view.history=ji();e.done=t.done,e.undone=t.undone},getTokenAt:function(t){var e=this.view.doc;t=Le(e,t);for(var i=E(this,t.line),a=this.view.mode,n=$i(e,t.line),o=new Xe(n.text,this.options.tabSize);o.pos<t.ch&&!o.eol();){o.start=o.pos;var s=a.token(o,i)}return{start:o.start,end:o.pos,string:o.current(),className:s||null,type:s||null,state:i}},getStateAfter:function(t){var e=this.view.doc;return t=Me(e,null==t?e.size-1:t),E(this,t+1)},cursorCoords:function(t,e){var i,a=this.view.sel;return i=null==t?a.head:"object"==typeof t?Le(this.view.doc,t):t?a.from:a.to,z(this,i,e||"page")},charCoords:function(t,e){return I(this,Le(this.view.doc,t),e||"page")},coordsChar:function(t){var e=this.display.lineSpace.getBoundingClientRect();return F(this,t.left-e.left,t.top-e.top)},defaultTextHeight:function(){return Y(this.display)},markText:q(null,function(t,e,i){return Ke(this,Le(this.view.doc,t),Le(this.view.doc,e),i,"range")}),setBookmark:q(null,function(t,e){return t=Le(this.view.doc,t),Ke(this,t,t,e?{replacedWith:e}:{},"bookmark")}),findMarksAt:function(t){var e=this.view.doc;t=Le(e,t);var i=[],a=$i(e,t.line).markedSpans;if(a)for(var n=0;n<a.length;++n){var o=a[n];(null==o.from||o.from<=t.ch)&&(null==o.to||o.to>=t.ch)&&i.push(o.marker)}return i},setGutterMarker:q(null,function(t,e,i){return ze(this,t,function(t){var a=t.gutterMarkers||(t.gutterMarkers={});return a[e]=i,!i&&sa(a)&&(t.gutterMarkers=null),!0})}),clearGutter:q(null,function(t){var e=0,i=this,a=i.view.doc;a.iter(0,a.size,function(a){a.gutterMarkers&&a.gutterMarkers[t]&&(a.gutterMarkers[t]=null,U(i,e,e+1),sa(a.gutterMarkers)&&(a.gutterMarkers=null)),++e})}),addLineClass:q(null,function(t,e,i){return ze(this,t,function(t){var a="text"==e?"textClass":"background"==e?"bgClass":"wrapClass";if(t[a]){if(new RegExp("\\b"+i+"\\b").test(t[a]))return!1;t[a]+=" "+i}else t[a]=i;return!0})}),removeLineClass:q(null,function(t,e,i){return ze(this,t,function(t){var a="text"==e?"textClass":"background"==e?"bgClass":"wrapClass",n=t[a];if(!n)return!1;if(null==i)t[a]=null;else{var o=n.replace(new RegExp("^"+i+"\\b\\s*|\\s*\\b"+i+"\\b"),"");if(o==n)return!1;t[a]=o||null}return!0})}),addLineWidget:q(null,function(t,e,i){var a=i||{};return a.node=e,a.noHScroll&&(this.display.alignWidgets=!0),ze(this,t,function(t){return(t.widgets||(t.widgets=[])).push(a),a.line=t,!0}),a}),removeLineWidget:q(null,function(t){var e=t.line.widgets,i=Ai(t.line);if(null!=i){for(var a=0;a<e.length;++a)e[a]==t&&e.splice(a--,1);U(this,i,i+1)}}),lineInfo:function(t){if("number"==typeof t){if(!$e(this.view.doc,t))return null;var e=t;if(t=$i(this.view.doc,t),!t)return null}else{var e=Ai(t);if(null==e)return null}return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(t,e,i,a,n){var o=this.display;t=z(this,Le(this.view.doc,t));var s=t.top,r=t.left;if(e.style.position="absolute",o.sizer.appendChild(e),"over"==a)s=t.top;else if("near"==a){var l=Math.max(o.wrapper.clientHeight,this.view.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);t.bottom+e.offsetHeight>l&&t.top>e.offsetHeight&&(s=t.top-e.offsetHeight),r+e.offsetWidth>c&&(r=c-e.offsetWidth)}e.style.top=s+A(o)+"px",e.style.left=e.style.right="","right"==n?(r=o.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==n?r=0:"middle"==n&&(r=(o.sizer.clientWidth-e.offsetWidth)/2),e.style.left=r+"px"),i&&Pe(this,r,s,r+e.offsetWidth,s+e.offsetHeight)},lineCount:function(){return this.view.doc.size},clipPos:function(t){return Le(this.view.doc,t)},getCursor:function(t){var e,i=this.view.sel;return e=null==t||"head"==t?i.head:"anchor"==t?i.anchor:"end"==t||t===!1?i.to:i.from,Te(e)},somethingSelected:function(){return!De(this.view.sel.from,this.view.sel.to)},setCursor:q(null,function(t,e,i){var a=Le(this.view.doc,"number"==typeof t?{line:t,ch:e||0}:t);i?Ee(this,a):Ae(this,a,a)}),setSelection:q(null,function(t,e){var i=this.view.doc;Ae(this,Le(i,t),Le(i,e||t))}),extendSelection:q(null,function(t,e){var i=this.view.doc;Ee(this,Le(i,t),e&&Le(i,e))}),setExtending:function(t){this.view.sel.extend=t},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){var e=this.view.doc;return $e(e,t)?$i(e,t):void 0},getLineNumber:function(t){return Ai(t)},setLine:q(null,function(t,e){$e(this.view.doc,t)&&Ce(this,e,{line:t,ch:0},{line:t,ch:$i(this.view.doc,t).text.length})}),removeLine:q(null,function(t){$e(this.view.doc,t)&&Ce(this,"",{line:t,ch:0},Le(this.view.doc,{line:t+1,ch:0}))}),replaceRange:q(null,function(t,e,i){var a=this.view.doc;return e=Le(a,e),i=i?Le(a,i):e,Ce(this,t,e,i)}),getRange:function(t,e,i){var a=this.view.doc;t=Le(a,t),e=Le(a,e);var n=t.line,o=e.line;if(n==o)return $i(a,n).text.slice(t.ch,e.ch);var s=[$i(a,n).text.slice(t.ch)];return a.iter(n+1,o,function(t){s.push(t.text)}),s.push($i(a,o).text.slice(0,e.ch)),s.join(i||"\n")},triggerOnKeyDown:q(null,me),execCommand:function(t){return sn[t](this)},moveH:q(null,function(t,e){var i=this.view.sel,a=0>t?i.from:i.to;(i.shift||i.extend||De(i.from,i.to))&&(a=Fe(this,t,e,!0)),Ee(this,a,a,t)}),deleteH:q(null,function(t,e){var i=this.view.sel;De(i.from,i.to)?Ce(this,"",i.from,Fe(this,t,e,!1),"delete"):Ce(this,"",i.from,i.to,"delete"),this.curOp.userSelChange=!0}),moveV:q(null,function(t,e){var i,a=this.view,n=a.doc,o=this.display,s=a.sel.head,r=z(this,s,"div"),l=r.left;if(null!=a.goalColumn&&(l=a.goalColumn),"page"==e){var c=Math.min(o.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);i=r.top+t*c}else"line"==e&&(i=t>0?r.bottom+3:r.top-3);do{var d=F(this,l,i);i+=5*t}while(d.outside&&(0>t?i>0:i<n.height));"page"==e&&(o.scrollbarV.scrollTop+=I(this,d,"div").top-r.top),Ee(this,d,d,t),a.goalColumn=l}),toggleOverwrite:function(){(this.view.overwrite=!this.view.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},posFromIndex:function(t){var e,i=0,a=this.view.doc;return a.iter(0,a.size,function(a){var n=a.text.length+1;return n>t?(e=t,!0):(t-=n,void++i)}),Le(a,{line:i,ch:e})},indexFromPos:function(t){if(t.line<0||t.ch<0)return 0;var e=t.ch;return this.view.doc.iter(0,t.line,function(t){e+=t.text.length+1}),e},scrollTo:function(t,e){null!=t&&(this.display.scrollbarH.scrollLeft=this.display.scroller.scrollLeft=t),null!=e&&(this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=e),g(this,[])
},getScrollInfo:function(){var t=this.display.scroller,e=dn;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-e,width:t.scrollWidth-e,clientHeight:t.clientHeight-e,clientWidth:t.clientWidth-e}},scrollIntoView:function(t){"number"==typeof t&&(t={line:t,ch:0}),t=t?Le(this.view.doc,t):this.view.sel.head,je(this,t)},setSize:function(t,e){function i(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t}null!=t&&(this.display.wrapper.style.width=i(t)),null!=e&&(this.display.wrapper.style.height=i(e)),this.refresh()},on:function(t,e){Vi(this,t,e)},off:function(t,e){qi(this,t,e)},operation:function(t){return q(this,t)()},refresh:function(){P(this),this.display.scroller.scrollHeight>this.view.scrollTop&&(this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=this.view.scrollTop),g(this,!0)},getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var Ka=t.optionHandlers={},Qa=t.defaults={},tn=t.Init={toString:function(){return"CodeMirror.Init"}};Re("value","",function(t,e){t.setValue(e)},!0),Re("mode",null,a,!0),Re("indentUnit",2,a,!0),Re("indentWithTabs",!1),Re("smartIndent",!0),Re("tabSize",4,function(t){a(t),P(t),g(t,!0)},!0),Re("electricChars",!0),Re("theme","default",function(t){s(t),r(t)},!0),Re("keyMap","default",o),Re("extraKeys",null),Re("onKeyEvent",null),Re("onDragEvent",null),Re("lineWrapping",!1,n,!0),Re("gutters",[],function(t){u(t.options),r(t)},!0),Re("lineNumbers",!1,function(t){u(t.options),r(t)},!0),Re("firstLineNumber",1,r,!0),Re("lineNumberFormatter",function(t){return t},r,!0),Re("showCursorWhenSelecting",!1,C,!0),Re("readOnly",!1,function(t,e){"nocursor"==e?(ge(t),t.display.input.blur()):e||K(t,!0)}),Re("dragDrop",!0),Re("cursorBlinkRate",530),Re("cursorHeight",1),Re("workTime",100),Re("workDelay",100),Re("flattenSpans",!0),Re("pollInterval",100),Re("undoDepth",40),Re("viewportMargin",10,function(t){t.refresh()},!0),Re("tabindex",null,function(t,e){t.display.input.tabIndex=e||""}),Re("autofocus",null);var en=t.modes={},an=t.mimeModes={};t.defineMode=function(e,i){if(t.defaults.mode||"null"==e||(t.defaults.mode=e),arguments.length>2){i.dependencies=[];for(var a=2;a<arguments.length;++a)i.dependencies.push(arguments[a])}en[e]=i},t.defineMIME=function(t,e){an[t]=e},t.resolveMode=function(e){if("string"==typeof e&&an.hasOwnProperty(e))e=an[e];else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return t.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},t.getMode=function(e,i){var i=t.resolveMode(i),a=en[i.name];if(!a)return t.getMode(e,"text/plain");var n=a(e,i);if(nn.hasOwnProperty(i.name)){var o=nn[i.name];for(var s in o)o.hasOwnProperty(s)&&(n.hasOwnProperty(s)&&(n["_"+s]=n[s]),n[s]=o[s])}return n.name=i.name,n},t.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),t.defineMIME("text/plain","null");var nn=t.modeExtensions={};t.extendMode=function(t,e){var i=nn.hasOwnProperty(t)?nn[t]:nn[t]={};for(var a in e)e.hasOwnProperty(a)&&(i[a]=e[a])},t.defineExtension=function(e,i){t.prototype[e]=i},t.defineOption=Re;var on=[];t.defineInitHook=function(t){on.push(t)},t.copyState=Ge,t.startState=Ve,t.innerMode=function(t,e){for(;t.innerMode;){var i=t.innerMode(e);e=i.state,t=i.mode}return i||{mode:t,state:e}};var sn=t.commands={selectAll:function(t){t.setSelection({line:0,ch:0},{line:t.lineCount()-1})},killLine:function(t){var e=t.getCursor(!0),i=t.getCursor(!1),a=!De(e,i);a||t.getLine(e.line).length!=e.ch?t.replaceRange("",e,a?i:{line:e.line},"delete"):t.replaceRange("",e,{line:e.line+1,ch:0},"delete")},deleteLine:function(t){var e=t.getCursor().line;t.replaceRange("",{line:e,ch:0},{line:e},"delete")},undo:function(t){t.undo()},redo:function(t){t.redo()},goDocStart:function(t){t.extendSelection({line:0,ch:0})},goDocEnd:function(t){t.extendSelection({line:t.lineCount()-1})},goLineStart:function(t){t.extendSelection(ga(t,t.getCursor().line))},goLineStartSmart:function(t){var e=t.getCursor(),i=ga(t,e.line),a=t.getLineHandle(i.line),n=Ni(a);if(n&&0!=n[0].level)t.extendSelection(i);else{var o=Math.max(0,a.text.search(/\S/)),s=e.line==i.line&&e.ch<=o&&e.ch;t.extendSelection({line:i.line,ch:s?0:o})}},goLineEnd:function(t){t.extendSelection(va(t,t.getCursor().line))},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goWordRight:function(t){t.moveH(1,"word")},delCharBefore:function(t){t.deleteH(-1,"char")},delCharAfter:function(t){t.deleteH(1,"char")},delWordBefore:function(t){t.deleteH(-1,"word")},delWordAfter:function(t){t.deleteH(1,"word")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("	","end","input")},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.replaceSelection("	","end","input")},transposeChars:function(t){var e=t.getCursor(),i=t.getLine(e.line);e.ch>0&&e.ch<i.length-1&&t.replaceRange(i.charAt(e.ch)+i.charAt(e.ch-1),{line:e.line,ch:e.ch-1},{line:e.line,ch:e.ch+1})},newlineAndIndent:function(t){q(t,function(){t.replaceSelection("\n","end","input"),t.indentLine(t.getCursor().line,null,!0)})()},toggleOverwrite:function(t){t.toggleOverwrite()}},rn=t.keyMap={};rn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},rn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordBefore","Ctrl-Delete":"delWordAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},rn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordBefore","Ctrl-Alt-Backspace":"delWordAfter","Alt-Delete":"delWordAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},rn["default"]=Ra?rn.macDefault:rn.pcDefault,rn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},t.isModifierKey=Ze,t.fromTextArea=function(e,i){function a(){e.value=l.getValue()}if(i||(i={}),i.value=e.value,!i.tabindex&&e.tabindex&&(i.tabindex=e.tabindex),null==i.autofocus){var n=document.body;try{n=document.activeElement}catch(o){}i.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}if(e.form){Vi(e.form,"submit",a);var s=e.form,r=s.submit;try{s.submit=function c(){a(),s.submit=r,s.submit(),s.submit=c}}catch(o){}}e.style.display="none";var l=t(function(t){e.parentNode.insertBefore(t,e.nextSibling)},i);return l.save=a,l.getTextArea=function(){return e},l.toTextArea=function(){a(),e.parentNode.removeChild(l.getWrapperElement()),e.style.display="",e.form&&(qi(e.form,"submit",a),"function"==typeof e.form.submit&&(e.form.submit=r))},l},Xe.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var i=e==t;else var i=e&&(t.test?t.test(e):t(e));return i?(++this.pos,e):void 0},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);return e>-1?(this.pos=e,!0):void 0},backUp:function(t){this.pos-=t},column:function(){return Ki(this.string,this.start,this.tabSize)},indentation:function(){return Ki(this.string,null,this.tabSize)},match:function(t,e,i){if("string"!=typeof t){var a=this.string.slice(this.pos).match(t);return a&&a.index>0?null:(a&&e!==!1&&(this.pos+=a[0].length),a)}var n=function(t){return i?t.toLowerCase():t};return n(this.string).indexOf(n(t),this.pos)==this.pos?(e!==!1&&(this.pos+=t.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},t.StringStream=Xe,Je.prototype.clear=function(){if(!this.explicitlyCleared){G(this.cm);for(var t=null,e=null,i=0;i<this.lines.length;++i){var a=this.lines[i],n=Qe(a.markedSpans,this);null!=n.to&&(e=Ai(a)),a.markedSpans=ti(a.markedSpans,n),null!=n.from?t=Ai(a):this.collapsed&&!di(a)&&Ei(a,Y(this.cm.display))}null!=t&&U(this.cm,t,e+1),this.lines.length=0,this.explicitlyCleared=!0,this.collapsed&&this.cm.view.cantEdit&&(this.cm.view.cantEdit=!1,Oe(this.cm)),V(this.cm),Zi(this.cm,this,"clear")}},Je.prototype.find=function(){for(var t,e,i=0;i<this.lines.length;++i){var a=this.lines[i],n=Qe(a.markedSpans,this);if(null!=n.from||null!=n.to){var o=Ai(a);null!=n.from&&(t={line:o,ch:n.from}),null!=n.to&&(e={line:o,ch:n.to})}}return"bookmark"==this.type?t:t&&{from:t,to:e}},window.lineIsHidden=di;var ln={},cn=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g;Mi.prototype={chunkSize:function(){return this.lines.length},remove:function(t,e,i){for(var a=t,n=t+e;n>a;++a){var o=this.lines[a];this.height-=o.height,vi(o),Zi(i,o,"delete")}this.lines.splice(t,e)},collapse:function(t){t.splice.apply(t,[t.length,0].concat(this.lines))},insertHeight:function(t,e,i){this.height+=i,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var a=0,n=e.length;n>a;++a)e[a].parent=this},iterN:function(t,e,i){for(var a=t+e;a>t;++t)if(i(this.lines[t]))return!0}},Li.prototype={chunkSize:function(){return this.size},remove:function(t,e,i){this.size-=e;for(var a=0;a<this.children.length;++a){var n=this.children[a],o=n.chunkSize();if(o>t){var s=Math.min(e,o-t),r=n.height;if(n.remove(t,s,i),this.height-=r-n.height,o==s&&(this.children.splice(a--,1),n.parent=null),0==(e-=s))break;t=0}else t-=o}if(this.size-e<25){var l=[];this.collapse(l),this.children=[new Mi(l)],this.children[0].parent=this}},collapse:function(t){for(var e=0,i=this.children.length;i>e;++e)this.children[e].collapse(t)},insert:function(t,e){for(var i=0,a=0,n=e.length;n>a;++a)i+=e[a].height;this.insertHeight(t,e,i)},insertHeight:function(t,e,i){this.size+=e.length,this.height+=i;for(var a=0,n=this.children.length;n>a;++a){var o=this.children[a],s=o.chunkSize();if(s>=t){if(o.insertHeight(t,e,i),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var r=o.lines.splice(o.lines.length-25,25),l=new Mi(r);o.height-=l.height,this.children.splice(a+1,0,l),l.parent=this}this.maybeSpill()}break}t-=s}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),i=new Li(e);if(t.parent){t.size-=i.size,t.height-=i.height;var a=ia(t.parent.children,t);t.parent.children.splice(a+1,0,i)}else{var n=new Li(t.children);n.parent=t,t.children=[n,i],t=n}i.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iter:function(t,e,i){this.iterN(t,e-t,i)},iterN:function(t,e,i){for(var a=0,n=this.children.length;n>a;++a){var o=this.children[a],s=o.chunkSize();if(s>t){var r=Math.min(e,s-t);if(o.iterN(t,r,i))return!0;if(0==(e-=r))break;t=0}else t-=s}}},t.e_stop=Hi,t.e_preventDefault=zi,t.e_stopPropagation=Fi,t.on=Vi,t.off=qi,t.signal=Ui;var dn=30,un=t.Pass={toString:function(){return"CodeMirror.Pass"}};Ji.prototype={set:function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)}},t.countColumn=Ki;var fn=[""],pn=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,hn=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F]/,mn=function(){if(Aa)return!1;var t=ra("div");return"draggable"in t||"dragDrop"in t}(),_n=/^$/;La?_n=/$'/:Pa?_n=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:Na&&(_n=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);var yn,gn,vn=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,i=[],a=t.length;a>=e;){var n=t.indexOf("\n",e);-1==n&&(n=t.length);var o=t.slice(e,"\r"==t.charAt(n-1)?n-1:n),s=o.indexOf("\r");-1!=s?(i.push(o.slice(0,s)),e+=s+1):(i.push(o),e=n+1)}return i}:function(t){return t.split(/\r\n?|\n/)};t.splitLines=vn;var bn=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(e){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(i){}return e&&e.parentElement()==t?0!=e.compareEndPoints("StartToEnd",e):!1},xn=function(){var t=ra("div");return"oncopy"in t?!0:(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),wn={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};t.keyNames=wn,function(){for(var t=0;10>t;t++)wn[t+48]=String(t);for(var t=65;90>=t;t++)wn[t]=String.fromCharCode(t);for(var t=1;12>=t;t++)wn[t+111]=wn[t+63235]="F"+t}();var kn=function(){function t(t){return 255>=t?e.charAt(t):t>=1424&&1524>=t?"R":t>=1536&&1791>=t?i.charAt(t-1536):t>=1792&&2220>=t?"r":"L"}var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",i="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",a=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,n=/[stwN]/,o=/[LRr]/,s=/[Lb1n]/,r=/[1n]/;return function(e){if(!a.test(e))return!1;for(var i,l=e.length,c=[],d=null,u=0;l>u;++u)c.push(i=t(e.charCodeAt(u))),null==d&&("L"==i?d="L":("R"==i||"r"==i)&&(d="R"));null==d&&(d="L");for(var u=0,f=d;l>u;++u){var i=c[u];"m"==i?c[u]=f:f=i}for(var u=0,p=d;l>u;++u){var i=c[u];"1"==i&&"r"==p?c[u]="n":o.test(i)&&(p=i,"r"==i&&(c[u]="R"))}for(var u=1,f=c[0];l-1>u;++u){var i=c[u];"+"==i&&"1"==f&&"1"==c[u+1]?c[u]="1":","!=i||f!=c[u+1]||"1"!=f&&"n"!=f||(c[u]=f),f=i}for(var u=0;l>u;++u){var i=c[u];if(","==i)c[u]="N";else if("%"==i){for(var h=u+1;l>h&&"%"==c[h];++h);for(var m=u&&"!"==c[u-1]||l-1>h&&"1"==c[h]?"1":"N",_=u;h>_;++_)c[_]=m;u=h-1}}for(var u=0,p=d;l>u;++u){var i=c[u];"L"==p&&"1"==i?c[u]="L":o.test(i)&&(p=i)}for(var u=0;l>u;++u)if(n.test(c[u])){for(var h=u+1;l>h&&n.test(c[h]);++h);for(var y="L"==(u?c[u-1]:d),g="L"==(l-1>h?c[h]:d),m=y||g?"L":"R",_=u;h>_;++_)c[_]=m;u=h-1}for(var v,b=[],u=0;l>u;)if(s.test(c[u])){var x=u;for(++u;l>u&&s.test(c[u]);++u);b.push({from:x,to:u,level:0})}else{var w=u,k=b.length;for(++u;l>u&&"L"!=c[u];++u);for(var _=w;u>_;)if(r.test(c[_])){_>w&&b.splice(k,0,{from:w,to:_,level:1});var C=_;for(++_;u>_&&r.test(c[_]);++_);b.splice(k,0,{from:C,to:_,level:2}),w=_}else++_;u>w&&b.splice(k,0,{from:w,to:u,level:1})}return 1==b[0].level&&(v=e.match(/^\s+/))&&(b[0].from=v[0].length,b.unshift({from:0,to:v[0].length,level:0})),1==ta(b).level&&(v=e.match(/\s+$/))&&(ta(b).to-=v[0].length,b.push({from:l-v[0].length,to:l,level:0})),b[0].level!=ta(b).level&&b.push({from:l,to:l,level:b[0].level}),b}}();return t.version="3.0",t}(),CodeMirror.defineMode("javascript",function(t,e){function i(t,e,i){return e.tokenize=i,i(t,e)}function a(t,e){for(var i,a=!1;null!=(i=t.next());){if(i==e&&!a)return!1;a=!a&&"\\"==i}return a}function n(t,e,i){return W=t,I=i,e}function o(t,e){var o=t.next();if('"'==o||"'"==o)return i(t,e,s(o));if(/[\[\]{}\(\),;\:\.]/.test(o))return n(o);if("0"==o&&t.eat(/x/i))return t.eatWhile(/[\da-f]/i),n("number","number");if(/\d/.test(o)||"-"==o&&t.eat(/\d/))return t.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),n("number","number");if("/"==o)return t.eat("*")?i(t,e,r):t.eat("/")?(t.skipToEnd(),n("comment","comment")):"operator"==e.lastType||"keyword c"==e.lastType||/^[\[{}\(,;:]$/.test(e.lastType)?(a(t,"/"),t.eatWhile(/[gimy]/),n("regexp","string-2")):(t.eatWhile(R),n("operator",null,t.current()));if("#"==o)return t.skipToEnd(),n("error","error");if(R.test(o))return t.eatWhile(R),n("operator",null,t.current());t.eatWhile(/[\w\$_]/);var l=t.current(),c=Y.propertyIsEnumerable(l)&&Y[l];return c&&"."!=e.lastType?n(c.type,c.style,l):n("variable","variable",l)}function s(t){return function(e,i){return a(e,t)||(i.tokenize=o),n("string","string")}}function r(t,e){for(var i,a=!1;i=t.next();){if("/"==i&&a){e.tokenize=o;break}a="*"==i}return n("comment","comment")}function l(t,e,i,a,n,o){this.indented=t,this.column=e,this.type=i,this.prev=n,this.info=o,null!=a&&(this.align=a)}function c(t,e){for(var i=t.localVars;i;i=i.next)if(i.name==e)return!0}function d(t,e,i,a,n){var o=t.cc;for(V.state=t,V.stream=n,V.marked=null,V.cc=o,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);;){var s=o.length?o.pop():F?b:v;if(s(i,a)){for(;o.length&&o[o.length-1].lex;)o.pop()();return V.marked?V.marked:"variable"==i&&c(t,a)?"variable-2":e}}}function u(){for(var t=arguments.length-1;t>=0;t--)V.cc.push(arguments[t])}function f(){return u.apply(null,arguments),!0}function p(t){var e=V.state;if(e.context){V.marked="def";for(var i=e.localVars;i;i=i.next)if(i.name==t)return;e.localVars={name:t,next:e.localVars}}}function h(){V.state.context={prev:V.state.context,vars:V.state.localVars},V.state.localVars=q}function m(){V.state.localVars=V.state.context.vars,V.state.context=V.state.context.prev}function _(t,e){var i=function(){var i=V.state;i.lexical=new l(i.indented,V.stream.column(),t,null,i.lexical,e)};return i.lex=!0,i}function y(){var t=V.state;t.lexical.prev&&(")"==t.lexical.type&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}function g(t){return function(e){return e==t?f():";"==t?u():f(arguments.callee)}}function v(t){return"var"==t?f(_("vardef"),$,g(";"),y):"keyword a"==t?f(_("form"),b,v,y):"keyword b"==t?f(_("form"),v,y):"{"==t?f(_("}"),T,y):";"==t?f():"function"==t?f(j):"for"==t?f(_("form"),g("("),_(")"),A,g(")"),y,v,y):"variable"==t?f(_("stat"),k):"switch"==t?f(_("form"),b,_("}","switch"),g("{"),T,y,y):"case"==t?f(b,g(":")):"default"==t?f(g(":")):"catch"==t?f(_("form"),h,g("("),P,g(")"),v,y,m):u(_("stat"),b,g(";"),y)}function b(t){return G.hasOwnProperty(t)?f(w):"function"==t?f(j):"keyword c"==t?f(x):"("==t?f(_(")"),x,g(")"),y,w):"operator"==t?f(b):"["==t?f(_("]"),S(b,"]"),y,w):"{"==t?f(_("}"),S(D,"}"),y,w):f()}function x(t){return t.match(/[;\}\)\],]/)?u():u(b)}function w(t,e){return"operator"==t&&/\+\+|--/.test(e)?f(w):"operator"==t&&"?"==e?f(b,g(":"),b):";"!=t?"("==t?f(_(")"),S(b,")"),y,w):"."==t?f(C,w):"["==t?f(_("]"),b,g("]"),y,w):void 0:void 0}function k(t){return":"==t?f(y,v):u(w,g(";"),y)}function C(t){return"variable"==t?(V.marked="property",f()):void 0}function D(t){return"variable"==t&&(V.marked="property"),G.hasOwnProperty(t)?f(g(":"),b):void 0}function S(t,e){function i(a){return","==a?f(t,i):a==e?f():f(g(e))}return function(a){return a==e?f():u(t,i)}}function T(t){return"}"==t?f():u(v,T)}function M(t){return":"==t?f(L):u()}function L(t){return"variable"==t?(V.marked="variable-3",f()):u()}function $(t,e){return"variable"==t?(p(e),H?f(M,E):f(E)):u()}function E(t,e){return"="==e?f(b,E):","==t?f($):void 0}function A(t){return"var"==t?f($,g(";"),B):f(";"==t?B:"variable"==t?O:B)}function O(t,e){return"in"==e?f(b):f(w,B)}function B(t,e){return";"==t?f(N):"in"==e?f(b):f(b,g(";"),N)}function N(t){")"!=t&&f(b)}function j(t,e){return"variable"==t?(p(e),f(j)):"("==t?f(_(")"),h,S(P,")"),y,v,m):void 0}function P(t,e){return"variable"==t?(p(e),H?f(M):f()):void 0}var W,I,z=t.indentUnit,F=e.json,H=e.typescript,Y=function(){function t(t){return{type:t,style:"keyword"}}var e=t("keyword a"),i=t("keyword b"),a=t("keyword c"),n=t("operator"),o={type:"atom",style:"atom"},s={"if":e,"while":e,"with":e,"else":i,"do":i,"try":i,"finally":i,"return":a,"break":a,"continue":a,"new":a,"delete":a,"throw":a,"var":t("var"),"const":t("var"),let:t("var"),"function":t("function"),"catch":t("catch"),"for":t("for"),"switch":t("switch"),"case":t("case"),"default":t("default"),"in":n,"typeof":n,"instanceof":n,"true":o,"false":o,"null":o,undefined:o,NaN:o,Infinity:o};if(H){var r={type:"variable",style:"variable-3"},l={"interface":t("interface"),"class":t("class"),"extends":t("extends"),constructor:t("constructor"),"public":t("public"),"private":t("private"),"protected":t("protected"),"static":t("static"),"super":t("super"),string:r,number:r,bool:r,any:r};for(var c in l)s[c]=l[c]}return s}(),R=/[+\-*&%=<>!?|]/,G={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},V={state:null,column:null,marked:null,cc:null},q={name:"this",next:{name:"arguments"}};return y.lex=!0,{startState:function(t){return{tokenize:o,lastType:null,cc:[],lexical:new l((t||0)-z,0,"block",!1),localVars:e.localVars,context:e.localVars&&{vars:e.localVars},indented:0}},token:function(t,e){if(t.sol()&&(e.lexical.hasOwnProperty("align")||(e.lexical.align=!1),e.indented=t.indentation()),t.eatSpace())return null;var i=e.tokenize(t,e);return"comment"==W?i:(e.lastType=W,d(e,i,W,I,t))},indent:function(t,e){if(t.tokenize==r)return CodeMirror.Pass;if(t.tokenize!=o)return 0;var i=e&&e.charAt(0),a=t.lexical;"stat"==a.type&&"}"==i&&(a=a.prev);var n=a.type,s=i==n;return"vardef"==n?a.indented+("operator"==t.lastType||","==t.lastType?4:0):"form"==n&&"{"==i?a.indented:"form"==n?a.indented+z:"stat"==n?a.indented+("operator"==t.lastType||","==t.lastType?z:0):"switch"!=a.info||s?a.align?a.column+(s?0:1):a.indented+(s?0:z):a.indented+(/^(?:case|default)\b/.test(e)?z:2*z)},electricChars:":{}",jsonMode:F}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0}),function(){function t(t,e,i,a){if(this.atOccurrence=!1,this.cm=t,null==a&&"string"==typeof e&&(a=!1),i=i?t.clipPos(i):{line:0,ch:0},this.pos={from:i,to:i},"string"!=typeof e)e.global||(e=new RegExp(e.source,e.ignoreCase?"ig":"g")),this.matches=function(i,a){if(i){e.lastIndex=0;for(var n=t.getLine(a.line).slice(0,a.ch),o=e.exec(n),s=0;o;){s+=o.index+1,n=n.slice(s),e.lastIndex=0;var r=e.exec(n);if(!r)break;o=r}s--}else{e.lastIndex=a.ch;var n=t.getLine(a.line),o=e.exec(n),s=o&&o.index}return o?{from:{line:a.line,ch:s},to:{line:a.line,ch:s+o[0].length},match:o}:void 0};else{a&&(e=e.toLowerCase());var n=a?function(t){return t.toLowerCase()}:function(t){return t},o=e.split("\n");this.matches=1==o.length?function(i,a){var o,s=n(t.getLine(a.line)),r=e.length;return(i?a.ch>=r&&-1!=(o=s.lastIndexOf(e,a.ch-r)):-1!=(o=s.indexOf(e,a.ch)))?{from:{line:a.line,ch:o},to:{line:a.line,ch:o+r}}:void 0}:function(e,i){var a=i.line,s=e?o.length-1:0,r=o[s],l=n(t.getLine(a)),c=e?l.indexOf(r)+r.length:l.lastIndexOf(r);if(!(e?c>=i.ch||c!=r.length:c<=i.ch||c!=l.length-r.length))for(;;){if(e?!a:a==t.lineCount()-1)return;if(l=n(t.getLine(a+=e?-1:1)),r=o[e?--s:++s],!(s>0&&s<o.length-1)){var d=e?l.lastIndexOf(r):l.indexOf(r)+r.length;if(e?d!=l.length-r.length:d!=r.length)return;var u={line:i.line,ch:c},f={line:a,ch:d};return{from:e?f:u,to:e?u:f}}if(l!=r)return}}}}t.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){function e(t){var e={line:t,ch:0};return i.pos={from:e,to:e},i.atOccurrence=!1,!1}for(var i=this,a=this.cm.clipPos(t?this.pos.from:this.pos.to);;){if(this.pos=this.matches(t,a))return this.atOccurrence=!0,this.pos.match||!0;if(t){if(!a.line)return e(0);a={line:a.line-1,ch:this.cm.getLine(a.line-1).length}}else{var n=this.cm.lineCount();if(a.line==n-1)return e(n);a={line:a.line+1,ch:0}}}},from:function(){return this.atOccurrence?this.pos.from:void 0},to:function(){return this.atOccurrence?this.pos.to:void 0},replace:function(t){var e=this;this.atOccurrence&&(e.pos.to=this.cm.replaceRange(t,e.pos.from,e.pos.to))}},CodeMirror.defineExtension("getSearchCursor",function(e,i,a){return new t(this,e,i,a)})}();